# Frontend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–µ–Ω–¥–∏–Ω–≥–∞ ¬´–†–µ—Ç—Ä–æ–∑–Ω–∞–∫¬ª

*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025*
*–í–µ—Ä—Å–∏—è: 1.2 - Rollback & Recovery Implementation*
*–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä: Winston*

---

## üìã –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è
**Brownfield Vanilla Web Architecture** ‚Äî –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —á–∏—Å—Ç—ã–µ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- **Static-First** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- **Progressive Enhancement** ‚Äî –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript
- **Mobile-First Design** ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ touch-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **Component-Based CSS** ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∏–ª–µ–π —Å Tailwind CSS
- **Zero Build Step** ‚Äî –ø—Ä—è–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —Å–±–æ—Ä—â–∏–∫–æ–≤

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **PageSpeed Score:** >85 (–º–æ–±–∏–ª—å–Ω—ã–µ), >90 (–¥–µ—Å–∫—Ç–æ–ø)
- **LCP:** <2.5s
- **FID:** <100ms
- **CLS:** <0.1
- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞—è–≤–∫—É:** 8-12%

---

## üèó –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend Stack
```
HTML5 (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞)
‚îú‚îÄ‚îÄ CSS3 (Grid, Flexbox, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ Tailwind CSS v3.4+ (—É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
‚îú‚îÄ‚îÄ Vanilla JavaScript ES6+ (–±–µ–∑ —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏–∏)
‚îî‚îÄ‚îÄ WebP/AVIF –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
```

### Backend Integration
```
PHP 7.4+ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π send-form.php)
‚îú‚îÄ‚îÄ –Ø–Ω–¥–µ–∫—Å SmartCaptcha (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
‚îú‚îÄ‚îÄ PHPMailer/mail() (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º)
‚îî‚îÄ‚îÄ JSON response API (–¥–ª—è AJAX)
```

### üîê SmartCaptcha –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û)

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SmartCaptcha —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ù–ï –ë–£–î–ï–¢!

#### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –Ø–Ω–¥–µ–∫—Å SmartCaptcha

1. **–ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–∞–π—Ç:** https://cloud.yandex.ru/services/smartcaptcha
2. **–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—Å—è/–≤—Ö–æ–¥–∏–º** –≤ –∞–∫–∫–∞—É–Ω—Ç –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–æ
3. **–°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ captcha:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–†–µ—Ç—Ä–æ–∑–Ω–∞–∫ - —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞"
   - –î–æ–º–µ–Ω—ã: `retroznak.ru`, `www.retroznak.ru` (–≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω)
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: "–°—Ä–µ–¥–Ω—è—è" (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–æ–≤)

#### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –ø–æ–ª—É—á–∏—Ç–µ –¥–≤–∞ –∫–ª—é—á–∞:

1. **–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ captcha**
2. **–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–¥–∞–Ω–∏—è –∫–æ–ø–∏—Ä—É–µ–º –∫–ª—é—á–∏:**
   - **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–ª—é—á** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `ysc1_...`) ‚Äî –¥–ª—è Frontend JavaScript
   - **–°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª—é—á** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `ysc2_...`) ‚Äî –¥–ª—è Backend PHP

```javascript
const SMARTCAPTCHA_CONFIG = {
  sitekey: 'ysc1_your_client_key_here',    // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–ª—é—á (–ø—É–±–ª–∏—á–Ω—ã–π)
  secret: 'ysc2_your_server_key_here'      // –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª—é—á (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π - —Ç–æ–ª—å–∫–æ –¥–ª—è PHP)
};
```

**üö® –í–ê–ñ–ù–û:**
- –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!
- –ö–ª—é—á–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–æ–º–µ–Ω–∞–º (—É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `localhost` –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

#### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend –∫–æ–¥–∞

**HTML —Ä–∞–∑–º–µ—Ç–∫–∞ captcha:**
```html
<!-- –í —Ñ–æ—Ä–º–µ –∑–∞–∫–∞–∑–∞ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è captcha -->
<div class="form-field">
    <div id="captcha-container" class="flex justify-center"></div>
    <input type="hidden" id="smart-token" name="smart-token">
</div>
```

**JavaScript –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// modules/captcha-handler.js
export class CaptchaHandler {
  constructor() {
    this.sitekey = 'YOUR_CLIENT_KEY_HERE'; // üîë –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
    this.widget = null;
    this.token = null;
    this.init();
  }

  init() {
    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ SmartCaptcha
    if (window.smartCaptcha) {
      this.render();
    } else {
      window.addEventListener('load', () => {
        setTimeout(() => this.render(), 500);
      });
    }
  }

  render() {
    const container = document.getElementById('captcha-container');
    if (!container || !window.smartCaptcha) {
      console.error('‚ùå SmartCaptcha –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
      return;
    }

    try {
      this.widget = window.smartCaptcha.render(container, {
        sitekey: this.sitekey,
        hl: 'ru', // –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        callback: (token) => this.onCaptchaSuccess(token),
        'expired-callback': () => this.onCaptchaExpired(),
        'error-callback': (error) => this.onCaptchaError(error)
      });

      console.log('‚úÖ SmartCaptcha –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SmartCaptcha:', error);
      this.showFallbackMessage();
    }
  }

  onCaptchaSuccess(token) {
    this.token = token;
    document.getElementById('smart-token').value = token;
    console.log('‚úÖ Captcha –ø—Ä–æ–π–¥–µ–Ω–∞');

    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const submitButton = document.querySelector('#order-form [type="submit"]');
    if (submitButton) {
      submitButton.disabled = false;
      submitButton.classList.remove('opacity-50');
    }
  }

  onCaptchaExpired() {
    this.token = null;
    document.getElementById('smart-token').value = '';
    console.warn('‚ö†Ô∏è Captcha –∏—Å—Ç–µ–∫–ª–∞');

    // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const submitButton = document.querySelector('#order-form [type="submit"]');
    if (submitButton) {
      submitButton.disabled = true;
      submitButton.classList.add('opacity-50');
    }
  }

  onCaptchaError(error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ SmartCaptcha:', error);
    this.showFallbackMessage();
  }

  showFallbackMessage() {
    const container = document.getElementById('captcha-container');
    container.innerHTML = `
      <div class="bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded">
        <p class="text-sm">
          ‚ö†Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–æ–±–æ—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.
          <br>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
          <a href="tel:+79832322206" class="font-semibold underline">+7 983 232-22-06</a>
        </p>
      </div>
    `;
  }

  reset() {
    if (this.widget && window.smartCaptcha) {
      window.smartCaptcha.reset(this.widget);
      this.token = null;
      document.getElementById('smart-token').value = '';
    }
  }

  isValid() {
    return this.token !== null && this.token.length > 0;
  }
}
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ form-handler.js:**
```javascript
import { CaptchaHandler } from './captcha-handler.js';

export class FormHandler {
  constructor(formSelector) {
    this.form = document.querySelector(formSelector);
    this.captcha = new CaptchaHandler(); // üîê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º captcha
    this.init();
  }

  init() {
    if (!this.form) return;

    // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const submitButton = this.form.querySelector('[type="submit"]');
    submitButton.disabled = true;
    submitButton.classList.add('opacity-50');

    this.form.addEventListener('submit', this.handleSubmit.bind(this));
  }

  async handleSubmit(e) {
    e.preventDefault();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º captcha
    if (!this.captcha.isValid()) {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç');
      return;
    }

    // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã...
    const formData = new FormData(this.form);
    // formData –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç smart-token –∏–∑ hidden input

    try {
      const response = await this.submitForm(formData);
      if (response.success) {
        this.showSuccessMessage();
        this.form.reset();
        this.captcha.reset(); // üîÑ –°–±—Ä–∞—Å—ã–≤–∞–µ–º captcha –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
      this.captcha.reset(); // üîÑ –°–±—Ä–∞—Å—ã–≤–∞–µ–º captcha –ø—Ä–∏ –æ—à–∏–±–∫–µ
    }
  }
}
```

#### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PHP (Backend)

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª php/smartcaptcha-config.php:**
```php
<?php
// üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SmartCaptcha
define('SMARTCAPTCHA_SERVER_KEY', 'YOUR_SERVER_KEY_HERE'); // üö® –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
define('SMARTCAPTCHA_URL', 'https://smartcaptcha.yandexcloud.net/validate');

/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ SmartCaptcha —Ç–æ–∫–µ–Ω–∞
 * @param string $token –¢–æ–∫–µ–Ω –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
 * @param string $userIP IP –∞–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * @return bool
 */
function validateSmartCaptcha($token, $userIP) {
    if (empty($token)) {
        error_log('SmartCaptcha: –ü—É—Å—Ç–æ–π —Ç–æ–∫–µ–Ω');
        return false;
    }

    $postData = [
        'secret' => SMARTCAPTCHA_SERVER_KEY,
        'token' => $token,
        'ip' => $userIP
    ];

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, SMARTCAPTCHA_URL);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($postData));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);

    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    if ($httpCode !== 200) {
        error_log("SmartCaptcha: HTTP –æ—à–∏–±–∫–∞ $httpCode");
        return false;
    }

    $result = json_decode($response, true);

    if (json_last_error() !== JSON_ERROR_NONE) {
        error_log('SmartCaptcha: –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON');
        return false;
    }

    $isValid = isset($result['status']) && $result['status'] === 'ok';

    if (!$isValid) {
        error_log('SmartCaptcha: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞ - ' . json_encode($result));
    }

    return $isValid;
}
?>
```

**–û–±–Ω–æ–≤–∏—Ç—å php/send-form.php:**
```php
<?php
require_once 'smartcaptcha-config.php';

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
$name = trim($_POST['name'] ?? '');
$phone = trim($_POST['phone'] ?? '');
$email = trim($_POST['email'] ?? '');
$model = trim($_POST['model'] ?? '');
$address = trim($_POST['address'] ?? '');
$comment = trim($_POST['comment'] ?? '');
$captchaToken = trim($_POST['smart-token'] ?? '');

// üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ SmartCaptcha (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)
$userIP = $_SERVER['HTTP_CF_CONNECTING_IP'] ?? $_SERVER['HTTP_X_FORWARDED_FOR'] ?? $_SERVER['REMOTE_ADDR'] ?? '';
$userIP = explode(',', $userIP)[0]; // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π IP –µ—Å–ª–∏ –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫

if (!validateSmartCaptcha($captchaToken, $userIP)) {
    http_response_code(400);
    echo json_encode([
        'success' => false,
        'message' => '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–æ–±–æ—Ç–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.'
    ]);
    exit;
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
$errors = [];
if (empty($name)) $errors[] = '–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
if (empty($phone)) $errors[] = '–¢–µ–ª–µ—Ñ–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω';
if (empty($model)) $errors[] = '–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å';

if (!empty($errors)) {
    http_response_code(400);
    echo json_encode([
        'success' => false,
        'message' => implode(', ', $errors)
    ]);
    exit;
}

// –î–∞–ª–µ–µ –∏–¥–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞...
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏:
echo json_encode([
    'success' => true,
    'message' => '–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞.'
]);
?>
```

#### –®–∞–≥ 5: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ SmartCaptcha

**–í HTML –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º `</body>`:**
```html
<!-- SmartCaptcha —Å–∫—Ä–∏–ø—Ç -->
<script src="https://smartcaptcha.yandexcloud.net/captcha.js" defer></script>
```

#### –®–∞–≥ 6: Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ï—Å–ª–∏ SmartCaptcha –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:**

1. **–ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã** –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º—ã
2. **–õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
3. **–£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SmartCaptcha
setTimeout(() => {
  if (!window.smartCaptcha) {
    console.error('‚ùå SmartCaptcha –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
    document.getElementById('captcha-container').innerHTML = `
      <div class="bg-red-100 border border-red-400 text-red-800 px-4 py-3 rounded">
        <h4 class="font-semibold mb-2">–§–æ—Ä–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</h4>
        <p class="text-sm mb-3">
          –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º:
        </p>
        <div class="space-y-2 text-sm">
          <div>üìû <a href="tel:+79832322206" class="font-semibold">+7 983 232-22-06</a></div>
          <div>üìß <a href="mailto:retroznak@mail.ru" class="font-semibold">retroznak@mail.ru</a></div>
          <div>üí¨ <a href="https://wa.me/79832322206" class="font-semibold">WhatsApp</a></div>
        </div>
      </div>
    `;
  }
}, 5000); // –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥ –∑–∞–≥—Ä—É–∑–∫–∏
```

#### –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É:**
   - [ ] Captcha –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - [ ] –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è captcha –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - [ ] –§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
   - [ ] –ü–∏—Å—å–º–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—á—Ç—É

2. **‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–µ–∑ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è captcha
   - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º —Ç–æ–∫–µ–Ω–µ
   - [ ] Fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SmartCaptcha
   - [ ] –°–±—Ä–æ—Å captcha –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

3. **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - [ ] –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –Ω–µ –≤–∏–¥–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - [ ] –¢–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - [ ] IP –∞–¥—Ä–µ—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

4. **‚úÖ UX –∫–∞—á–µ—Å—Ç–≤–æ:**
   - [ ] –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - [ ] –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Å–≤—è–∑–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
   - [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```php
// –í send-form.php –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
error_log("SmartCaptcha validation - IP: $userIP, Token: " . substr($captchaToken, 0, 20) . "..., Result: " . ($isValid ? 'SUCCESS' : 'FAILED'));
```

**JavaScript –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:**
```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dev —Ä–µ–∂–∏–º–µ
const DEBUG_MODE = window.location.hostname === 'localhost';
if (DEBUG_MODE) {
  console.log('üîç SmartCaptcha Debug Mode ON');
  console.log('Sitekey:', this.sitekey);
  console.log('Widget ID:', this.widget);
}
```

**üéØ –ò–¢–û–ì:** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ –±—É–¥–µ—Ç –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!

### Infrastructure & Tools
```
Shared —Ö–æ—Å—Ç–∏–Ω–≥ —Å HTTP/2
‚îú‚îÄ‚îÄ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (HTML, CSS, JS)
‚îú‚îÄ‚îÄ CDN –¥–ª—è Tailwind CSS
‚îú‚îÄ‚îÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ HTTPS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
—Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫-–ª–µ–Ω–¥–∏–Ω–≥/
‚îú‚îÄ‚îÄ index.html                          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–µ–Ω–¥–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.css                    # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components.css              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vendor/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ tailwind.min.css        # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è Tailwind (fallback)
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.js                      # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ form-handler.js         # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ smooth-scroll.js        # –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faq-accordion.js        # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ FAQ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product-selector.js     # –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.js            # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ validation.js           # –£—Ç–∏–ª–∏—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ api.js                  # API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å PHP
‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ       ‚îú‚îÄ‚îÄ hero/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ hero-retroznak-1200.webp  # –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ hero-retroznak-800.webp   # –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ hero-retroznak-1200.jpg   # JPEG fallback
‚îÇ       ‚îú‚îÄ‚îÄ products/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ petrogradsky-400.webp     # –§–æ—Ç–æ –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–æ–≥–æ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ leningradsky-400.webp     # –§–æ—Ç–æ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–≥–æ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ vip-400.webp              # –§–æ—Ç–æ VIP –Ω–µ—Ä–∂–∞–≤–µ–π–∫–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ installation-800.webp     # –§–æ—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ clients/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ reviews/                  # –§–æ—Ç–æ –æ—Ç–∑—ã–≤–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ installations/            # –§–æ—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ process/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ production-800.webp       # –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ enameling-600.webp        # –≠–º–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ quality-600.webp          # –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ       ‚îî‚îÄ‚îÄ ui/
‚îÇ           ‚îú‚îÄ‚îÄ icons/                    # SVG –∏–∫–æ–Ω–∫–∏
‚îÇ           ‚îú‚îÄ‚îÄ patterns/                 # –§–æ–Ω–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚îÇ           ‚îî‚îÄ‚îÄ placeholders/             # –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è lazy loading
‚îú‚îÄ‚îÄ php/
‚îÇ   ‚îú‚îÄ‚îÄ send-form.php                     # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π PHP —Å–∫—Ä–∏–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ config.php                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ includes/
‚îÇ       ‚îú‚îÄ‚îÄ validation.php                # –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ email-template.php            # –®–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ deployment-guide.md               # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
    ‚îú‚îÄ‚îÄ performance-checklist.md          # –ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ browser-support.md                # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã
```

---

## üé® –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CSS

### CSS Architecture Pattern: BEMCSS + Tailwind Hybrid

**main.css** ‚Äî –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```css
/* CSS Custom Properties –¥–ª—è –±—Ä–µ–Ω–¥–∏–Ω–≥–∞ */
:root {
  --retro-gold: #D4AF37;
  --retro-blue: #1E3A8A;
  --retro-green: #065F46;
  --retro-dark: #1F2937;
  --retro-light: #F9FAFB;

  /* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è */
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-serif: 'Georgia', 'Times New Roman', serif;

  /* –û—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–∑–º–µ—Ä—ã */
  --section-padding: clamp(3rem, 8vw, 6rem);
  --container-max: 1280px;

  /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
  --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Reset –∏ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: var(--font-primary);
  line-height: 1.6;
  color: var(--retro-dark);
  margin: 0;
}

/* –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –¥–ª—è accessibility */
*:focus-visible {
  outline: 2px solid var(--retro-blue);
  outline-offset: 2px;
}
```

**components.css** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏:
```css
/* Hero Section Component */
.hero-section {
  background: linear-gradient(135deg, var(--retro-blue) 0%, var(--retro-green) 100%);
  position: relative;
  overflow: hidden;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('/assets/images/ui/patterns/retro-pattern.svg');
  opacity: 0.1;
  pointer-events: none;
}

/* Product Card Component */
.product-card {
  background: white;
  border-radius: 1rem;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  transition: var(--transition-smooth);
  border: 2px solid transparent;
}

.product-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
}

.product-card--featured {
  border-color: var(--retro-gold);
  position: relative;
  transform: scale(1.05);
}

.product-card--featured::before {
  content: '–•–∏—Ç –ø—Ä–æ–¥–∞–∂';
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--retro-gold);
  color: white;
  padding: 0.5rem 1.5rem;
  border-radius: 2rem;
  font-size: 0.875rem;
  font-weight: 600;
}

/* Form Component */
.form-container {
  background: white;
  border-radius: 1.5rem;
  padding: 2.5rem;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(209, 213, 219, 0.3);
}

.form-field {
  position: relative;
  margin-bottom: 1.5rem;
}

.form-input {
  width: 100%;
  padding: 1rem 1.25rem;
  border: 2px solid #E5E7EB;
  border-radius: 0.75rem;
  font-size: 1rem;
  transition: var(--transition-smooth);
  background: #F9FAFB;
}

.form-input:focus {
  border-color: var(--retro-blue);
  background: white;
  outline: none;
  box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
}

.form-input:invalid {
  border-color: #EF4444;
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

/* Button Components */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 2rem;
  border-radius: 0.75rem;
  font-weight: 600;
  font-size: 1rem;
  text-decoration: none;
  transition: var(--transition-smooth);
  cursor: pointer;
  border: none;
  min-width: 44px; /* Touch target size */
  min-height: 44px;
}

.btn-primary {
  background: linear-gradient(135deg, var(--retro-gold) 0%, #B8860B 100%);
  color: white;
  box-shadow: 0 4px 14px 0 rgba(212, 175, 55, 0.4);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px 0 rgba(212, 175, 55, 0.6);
}

.btn-secondary {
  background: white;
  color: var(--retro-blue);
  border: 2px solid var(--retro-blue);
}

.btn-secondary:hover {
  background: var(--retro-blue);
  color: white;
}

/* FAQ Accordion Component */
.faq-item {
  border-bottom: 1px solid #E5E7EB;
}

.faq-question {
  width: 100%;
  padding: 1.5rem 0;
  background: none;
  border: none;
  text-align: left;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--retro-dark);
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.faq-answer {
  padding: 0 0 1.5rem 0;
  color: #6B7280;
  line-height: 1.7;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out, padding 0.3s ease-out;
}

.faq-item.open .faq-answer {
  max-height: 200px; /* –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ */
  padding: 0 0 1.5rem 0;
}

/* Loading states */
.loading {
  opacity: 0.6;
  pointer-events: none;
  position: relative;
}

.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--retro-gold);
  border-top: 2px solid transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .hero-section {
    padding: 4rem 1rem;
  }

  .form-container {
    padding: 1.5rem;
    border-radius: 1rem;
  }

  .product-card--featured {
    transform: none; /* –£–±–∏—Ä–∞–µ–º scale –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
  }
}
```

### Tailwind CSS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**CDN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:**
```html
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          'retro': {
            'gold': '#D4AF37',
            'blue': '#1E3A8A',
            'green': '#065F46',
            'dark': '#1F2937',
            'light': '#F9FAFB'
          }
        },
        fontFamily: {
          'sans': ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
          'serif': ['Georgia', 'Times New Roman', 'serif']
        },
        animation: {
          'fade-in': 'fadeIn 0.6s ease-out',
          'slide-up': 'slideUp 0.8s ease-out',
          'bounce-soft': 'bounceSoft 0.6s ease-out'
        },
        keyframes: {
          fadeIn: {
            '0%': { opacity: '0', transform: 'translateY(20px)' },
            '100%': { opacity: '1', transform: 'translateY(0)' }
          },
          slideUp: {
            '0%': { transform: 'translateY(100px)', opacity: '0' },
            '100%': { transform: 'translateY(0)', opacity: '1' }
          },
          bounceSoft: {
            '0%': { transform: 'scale(0.95)' },
            '50%': { transform: 'scale(1.02)' },
            '100%': { transform: 'scale(1)' }
          }
        },
        spacing: {
          '18': '4.5rem',
          '88': '22rem',
          '128': '32rem'
        }
      }
    },
    plugins: []
  }
</script>
```

---

## üì± Responsive Design Strategy

### Mobile-First Breakpoints
```css
/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–¥–æ 640px) */
.container {
  padding: 1rem;
  max-width: 100%;
}

/* Small tablets –∏ –±–æ–ª—å—à–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã (640px+) */
@media (min-width: 640px) {
  .container {
    padding: 1.5rem;
    max-width: 640px;
    margin: 0 auto;
  }
}

/* Tablets (768px+) */
@media (min-width: 768px) {
  .container {
    padding: 2rem;
    max-width: 768px;
  }

  .product-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }
}

/* Desktop (1024px+) */
@media (min-width: 1024px) {
  .container {
    max-width: 1024px;
  }

  .product-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 2.5rem;
  }
}

/* Large desktop (1280px+) */
@media (min-width: 1280px) {
  .container {
    max-width: 1280px;
  }
}
```

### Touch-Friendly Design
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫: 44px √ó 44px
- –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏: –º–∏–Ω–∏–º—É–º 8px
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ swipe-–∂–µ—Å—Ç–æ–≤ –¥–ª—è –≥–∞–ª–µ—Ä–µ–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä

---

## ‚öôÔ∏è JavaScript –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥—É–ª—å–Ω–∞—è ES6+ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**app.js** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞:
```javascript
// –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
import { FormHandler } from './modules/form-handler.js';
import { SmoothScroll } from './modules/smooth-scroll.js';
import { FAQAccordion } from './modules/faq-accordion.js';
import { ProductSelector } from './modules/product-selector.js';
import { Analytics } from './modules/analytics.js';

class RetroZnakApp {
  constructor() {
    this.components = {};
    this.init();
  }

  init() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    document.addEventListener('DOMContentLoaded', () => {
      this.initComponents();
      this.bindGlobalEvents();
      this.startAnalytics();
    });
  }

  initComponents() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    this.components.formHandler = new FormHandler('#order-form');
    this.components.smoothScroll = new SmoothScroll();
    this.components.faq = new FAQAccordion('.faq-section');
    this.components.productSelector = new ProductSelector('.product-grid');

    console.log('‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã');
  }

  bindGlobalEvents() {
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    window.addEventListener('scroll', this.handleScroll.bind(this));
    window.addEventListener('resize', this.handleResize.bind(this));
  }

  handleScroll() {
    // Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    this.components.lazyLoader?.checkImages();

    // –ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
    this.animateOnScroll();
  }

  handleResize() {
    // –ü–µ—Ä–µ—Å—á–µ—Ç layout –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
    this.components.productSelector?.recalculateLayout();
  }

  startAnalytics() {
    this.components.analytics = new Analytics();
    this.components.analytics.trackPageView();
  }

  animateOnScroll() {
    const elements = document.querySelectorAll('[data-animate]');

    elements.forEach(el => {
      const rect = el.getBoundingClientRect();
      const isVisible = rect.top < window.innerHeight && rect.bottom > 0;

      if (isVisible && !el.classList.contains('animated')) {
        el.classList.add('animated', 'animate-fade-in');
      }
    });
  }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
new RetroZnakApp();
```

**modules/form-handler.js** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º:
```javascript
import { validateForm } from '../utils/validation.js';
import { apiRequest } from '../utils/api.js';

export class FormHandler {
  constructor(formSelector) {
    this.form = document.querySelector(formSelector);
    this.submitButton = this.form?.querySelector('[type="submit"]');
    this.init();
  }

  init() {
    if (!this.form) return;

    this.form.addEventListener('submit', this.handleSubmit.bind(this));
    this.bindInputEvents();
  }

  bindInputEvents() {
    const inputs = this.form.querySelectorAll('input, textarea, select');

    inputs.forEach(input => {
      input.addEventListener('blur', (e) => this.validateField(e.target));
      input.addEventListener('input', (e) => this.clearErrors(e.target));
    });
  }

  async handleSubmit(e) {
    e.preventDefault();

    if (!this.validateForm()) return;

    this.setLoadingState(true);

    try {
      const formData = new FormData(this.form);
      const response = await apiRequest('/php/send-form.php', {
        method: 'POST',
        body: formData
      });

      if (response.success) {
        this.showSuccessMessage();
        this.trackConversion();
        this.form.reset();
      } else {
        this.showErrorMessage(response.message);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã:', error);
      this.showErrorMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
    } finally {
      this.setLoadingState(false);
    }
  }

  validateForm() {
    const validation = validateForm(this.form);

    if (!validation.isValid) {
      validation.errors.forEach(error => {
        this.showFieldError(error.field, error.message);
      });

      // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ —Å –æ—à–∏–±–∫–æ–π
      const firstErrorField = this.form.querySelector('.error');
      if (firstErrorField) {
        firstErrorField.focus();
      }
    }

    return validation.isValid;
  }

  validateField(field) {
    const validation = validateForm(this.form, [field.name]);
    const error = validation.errors.find(e => e.field === field.name);

    if (error) {
      this.showFieldError(field, error.message);
    } else {
      this.clearErrors(field);
    }
  }

  showFieldError(field, message) {
    const fieldElement = typeof field === 'string'
      ? this.form.querySelector(`[name="${field}"]`)
      : field;

    fieldElement.classList.add('error');

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    let errorElement = fieldElement.parentElement.querySelector('.error-message');
    if (!errorElement) {
      errorElement = document.createElement('div');
      errorElement.className = 'error-message text-red-500 text-sm mt-1';
      fieldElement.parentElement.appendChild(errorElement);
    }

    errorElement.textContent = message;
  }

  clearErrors(field) {
    field.classList.remove('error');
    const errorElement = field.parentElement.querySelector('.error-message');
    if (errorElement) {
      errorElement.remove();
    }
  }

  setLoadingState(loading) {
    if (loading) {
      this.submitButton.disabled = true;
      this.submitButton.classList.add('loading');
      this.submitButton.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
    } else {
      this.submitButton.disabled = false;
      this.submitButton.classList.remove('loading');
      this.submitButton.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É';
    }
  }

  showSuccessMessage() {
    const message = document.createElement('div');
    message.className = 'success-message bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-lg mb-4';
    message.innerHTML = `
      <div class="flex items-center">
        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
        </svg>
        <div>
          <p class="font-semibold">–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</p>
          <p class="text-sm">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞.</p>
        </div>
      </div>
    `;

    this.form.insertBefore(message, this.form.firstChild);

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
      message.remove();
    }, 5000);
  }

  showErrorMessage(text) {
    const message = document.createElement('div');
    message.className = 'error-message bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg mb-4';
    message.textContent = text;

    this.form.insertBefore(message, this.form.firstChild);

    setTimeout(() => {
      message.remove();
    }, 5000);
  }

  trackConversion() {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
    if (window.gtag) {
      gtag('event', 'form_submit', {
        'event_category': 'engagement',
        'event_label': 'order_form'
      });
    }

    if (window.ym) {
      ym(YANDEX_METRIKA_ID, 'reachGoal', 'ORDER_FORM_SUBMIT');
    }
  }
}
```

**modules/product-selector.js** ‚Äî –≤—ã–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞:
```javascript
export class ProductSelector {
  constructor(gridSelector) {
    this.grid = document.querySelector(gridSelector);
    this.selectedProduct = null;
    this.init();
  }

  init() {
    if (!this.grid) return;

    const productCards = this.grid.querySelectorAll('.product-card');
    productCards.forEach(card => {
      this.bindCardEvents(card);
    });
  }

  bindCardEvents(card) {
    const orderButton = card.querySelector('.btn-order');
    const productName = card.dataset.product;
    const productPrice = card.dataset.price;

    if (orderButton) {
      orderButton.addEventListener('click', (e) => {
        e.preventDefault();
        this.selectProduct(productName, productPrice);
        this.scrollToOrderForm();
      });
    }

    // Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è desktop
    if (!('ontouchstart' in window)) {
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-8px) scale(1.02)';
      });

      card.addEventListener('mouseleave', () => {
        card.style.transform = '';
      });
    }
  }

  selectProduct(name, price) {
    this.selectedProduct = { name, price };

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞
    this.updateOrderForm(name, price);

    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤—ã–±–æ—Ä –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
    this.trackProductSelection(name);

    console.log(`‚úÖ –í—ã–±—Ä–∞–Ω –ø—Ä–æ–¥—É–∫—Ç: ${name} (${price}‚ÇΩ)`);
  }

  updateOrderForm(productName, price) {
    const orderForm = document.querySelector('#order-form');
    if (!orderForm) return;

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–æ–º
    const productField = orderForm.querySelector('[name="model"]');
    if (productField) {
      productField.value = productName;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–æ—Ä–º—ã
    const formTitle = orderForm.querySelector('.form-title');
    if (formTitle) {
      formTitle.textContent = `–ó–∞–∫–∞–∑ ${productName}`;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–µ–Ω–µ –≤ —Ñ–æ—Ä–º–µ
    const priceDisplay = orderForm.querySelector('.price-display');
    if (priceDisplay) {
      priceDisplay.innerHTML = `
        <div class="bg-retro-gold/10 p-4 rounded-lg">
          <p class="text-lg font-semibold text-retro-gold">
            ${productName}: ${price}‚ÇΩ
          </p>
        </div>
      `;
    }
  }

  scrollToOrderForm() {
    const orderSection = document.querySelector('#order');
    if (orderSection) {
      orderSection.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  }

  trackProductSelection(productName) {
    if (window.gtag) {
      gtag('event', 'select_item', {
        'item_category': 'retroznak',
        'item_name': productName
      });
    }

    if (window.ym) {
      ym(YANDEX_METRIKA_ID, 'reachGoal', 'PRODUCT_SELECTED', {
        product: productName
      });
    }
  }

  recalculateLayout() {
    // –ü–µ—Ä–µ—Å—á–µ—Ç layout –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    if (window.innerWidth < 768) {
      // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è - —É–±–∏—Ä–∞–µ–º hover —ç—Ñ—Ñ–µ–∫—Ç—ã
      this.grid.querySelectorAll('.product-card').forEach(card => {
        card.style.transform = '';
      });
    }
  }
}
```

---

## üèó HTML5 —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ë–∞–∑–æ–≤–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ —Å –º–∏–∫—Ä–æ–¥–∞–Ω–Ω—ã–º–∏
```html
<!DOCTYPE html>
<html lang="ru" itemscope itemtype="https://schema.org/LocalBusiness">
<head>
    <!-- Critical meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SEO meta tags -->
    <title>–†–µ—Ç—Ä–æ–∑–Ω–∞–∫ ‚Äî –¥–æ–º–æ–≤—ã–µ –∑–Ω–∞–∫–∏ –≤ —Å—Ç–∏–ª–µ —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | –û—Ç 1990‚ÇΩ</title>
    <meta name="description" content="–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤ –∏–∑ –º–µ—Ç–∞–ª–ª–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º 1924 –≥–æ–¥–∞. –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π, –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π –∏ VIP —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫–∏. –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ 20 –ª–µ—Ç. 5000+ –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.">
    <meta name="keywords" content="–¥–æ–º–æ–≤—ã–µ –∑–Ω–∞–∫–∏, —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫, –∞–¥—Ä–µ—Å–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏, —Å–æ–≤–µ—Ç—Å–∫–∏–µ –∑–Ω–∞–∫–∏, —Ç–∞–±–ª–∏—á–∫–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π, –¢–æ–º—Å–∫">

    <!-- Open Graph -->
    <meta property="og:title" content="–†–µ—Ç—Ä–æ–∑–Ω–∞–∫ ‚Äî –¥–æ–º–æ–≤—ã–µ –∑–Ω–∞–∫–∏ –≤ —Å—Ç–∏–ª–µ —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏">
    <meta property="og:description" content="–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º 1924 –≥–æ–¥–∞. –û—Ç 1990‚ÇΩ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –¥–æ 20 –ª–µ—Ç.">
    <meta property="og:image" content="/assets/images/hero/hero-retroznak-1200.jpg">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://retroznak.ru">

    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "–†–µ—Ç—Ä–æ–∑–Ω–∞–∫",
      "image": "/assets/images/hero/hero-retroznak-1200.jpg",
      "description": "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º 1924 –≥–æ–¥–∞",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "—É–ª. –ï–Ω–∏—Å–µ–π—Å–∫–∞—è, –¥.32–±",
        "addressLocality": "–¢–æ–º—Å–∫",
        "postalCode": "634041",
        "addressCountry": "RU"
      },
      "telephone": "+7 983 232-22-06",
      "email": "retroznak@mail.ru",
      "url": "https://retroznak.ru",
      "sameAs": [
        "https://vk.com/retroznak",
        "https://t.me/Rznak"
      ],
      "priceRange": "1990‚ÇΩ-9300‚ÇΩ"
    }
    </script>

    <!-- Preload critical resources -->
    <link rel="preload" href="/assets/css/main.css" as="style">
    <link rel="preload" href="/assets/images/hero/hero-retroznak-800.webp" as="image" media="(max-width: 768px)">
    <link rel="preload" href="/assets/images/hero/hero-retroznak-1200.webp" as="image" media="(min-width: 769px)">

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Analytics -->
    <!-- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –∏ Google Analytics –∑–¥–µ—Å—å -->
</head>

<body class="antialiased">
    <!-- Hero Section -->
    <header id="hero" class="hero-section min-h-screen flex items-center relative"
            role="banner" aria-label="–ì–ª–∞–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è">
        <div class="container mx-auto px-4 z-10">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç hero -->
                <div class="text-center lg:text-left" data-animate>
                    <h1 class="text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight">
                        –°–µ–∫—Ä–µ—Ç –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–ª–∏ –Ω–∞—à–∏
                        <span class="text-retro-gold">–ø—Ä–∞–¥–µ–¥—ã</span>
                    </h1>

                    <p class="text-xl text-blue-100 mb-8 leading-relaxed">
                        –í–æ—Å—Å–æ–∑–¥–∞–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≥–æ—Ä—è—á–µ–π —ç–º–∞–ª–∏ 1924 –≥–æ–¥–∞ –¥–ª—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
                        –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—É–∂–∞—Ç –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏—è–º–∏
                    </p>

                    <!-- CTA –∫–Ω–æ–ø–∫–∏ -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <a href="#products" class="btn btn-primary animate-bounce-soft">
                            –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å
                        </a>
                        <a href="#history" class="btn btn-secondary">
                            –£–∑–Ω–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
                        </a>
                    </div>
                </div>

                <!-- –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                <div class="order-first lg:order-last" data-animate>
                    <picture>
                        <source media="(max-width: 768px)"
                                srcset="/assets/images/hero/hero-retroznak-800.webp"
                                type="image/webp">
                        <source media="(min-width: 769px)"
                                srcset="/assets/images/hero/hero-retroznak-1200.webp"
                                type="image/webp">
                        <img src="/assets/images/hero/hero-retroznak-1200.jpg"
                             alt="–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –Ω–∞ –∫—Ä–∞—Å–∏–≤–æ–º –¥–æ–º–µ"
                             class="w-full h-auto rounded-lg shadow-2xl"
                             loading="eager">
                    </picture>
                </div>
            </div>
        </div>
    </header>

    <!-- Product Matrix Section -->
    <section id="products" class="py-20 bg-gray-50"
             role="main" aria-label="–¢–æ–≤–∞—Ä–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16" data-animate>
                <h2 class="text-4xl font-bold text-retro-dark mb-6">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    –¢—Ä–∏ –º–æ–¥–µ–ª–∏ –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –±—é–¥–∂–µ—Ç–∞
                </p>
            </div>

            <div class="product-grid grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Product Card 1: –û–±—ã—á–Ω—ã–π -->
                <article class="product-card"
                         data-product="–û–±—ã—á–Ω—ã–π"
                         data-price="1990"
                         itemscope itemtype="https://schema.org/Product">
                    <div class="p-6">
                        <img src="/assets/images/products/obyichnii-400.webp"
                             alt="–û–±—ã—á–Ω—ã–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫"
                             class="w-full h-48 object-cover rounded-lg mb-4"
                             itemprop="image">

                        <h3 class="text-xl font-bold mb-2" itemprop="name">
                            –û–±—ã—á–Ω—ã–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫
                        </h3>

                        <div class="mb-4" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                            <span class="text-3xl font-bold text-retro-gold" itemprop="price">1990‚ÇΩ</span>
                            <meta itemprop="priceCurrency" content="RUB">
                        </div>

                        <ul class="text-sm text-gray-600 space-y-2 mb-6">
                            <li>‚úì –†–∞–∑–º–µ—Ä: 35√ó27 —Å–º</li>
                            <li>‚úì –°—Ç–∞–ª—å —Å –ø–æ–∫—Ä–∞—Å–∫–æ–π</li>
                            <li>‚úì –°—Ä–æ–∫ —Å–ª—É–∂–±—ã: 10+ –ª–µ—Ç</li>
                            <li>‚úì –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤ –ø–æ–¥–∞—Ä–æ–∫</li>
                        </ul>

                        <button class="btn btn-primary w-full btn-order"
                                aria-label="–ó–∞–∫–∞–∑–∞—Ç—å –æ–±—ã—á–Ω—ã–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫">
                            –ó–∞–∫–∞–∑–∞—Ç—å –∑–∞ 1990‚ÇΩ
                        </button>
                    </div>
                </article>

                <!-- Product Card 2: –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π (Featured) -->
                <article class="product-card product-card--featured"
                         data-product="–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π"
                         data-price="4300"
                         itemscope itemtype="https://schema.org/Product">
                    <div class="p-6">
                        <img src="/assets/images/products/petrogradsky-400.webp"
                             alt="–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫"
                             class="w-full h-48 object-cover rounded-lg mb-4"
                             itemprop="image">

                        <h3 class="text-xl font-bold mb-2" itemprop="name">
                            –ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫
                        </h3>

                        <div class="mb-4" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                            <span class="text-3xl font-bold text-retro-gold" itemprop="price">4300‚ÇΩ</span>
                            <meta itemprop="priceCurrency" content="RUB">
                        </div>

                        <ul class="text-sm text-gray-600 space-y-2 mb-6">
                            <li>‚úì –†–∞–∑–º–µ—Ä: 52√ó40 —Å–º</li>
                            <li>‚úì –ì–æ—Ä—è—á–∞—è —ç–º–∞–ª—å</li>
                            <li>‚úì –°—Ä–æ–∫ —Å–ª—É–∂–±—ã: 20+ –ª–µ—Ç</li>
                            <li>‚úì LED –ø–æ–¥—Å–≤–µ—Ç–∫–∞</li>
                            <li>‚úì –§–∏—Ä–º–µ–Ω–Ω–æ–µ –∫–ª–µ–π–º–æ ¬´–†–ó¬ª</li>
                        </ul>

                        <button class="btn btn-primary w-full btn-order"
                                aria-label="–ó–∞–∫–∞–∑–∞—Ç—å –ø–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫">
                            –ó–∞–∫–∞–∑–∞—Ç—å –∑–∞ 4300‚ÇΩ
                        </button>
                    </div>
                </article>

                <!-- Product Card 3: –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP -->
                <article class="product-card"
                         data-product="–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP"
                         data-price="9300"
                         itemscope itemtype="https://schema.org/Product">
                    <div class="p-6">
                        <div class="relative">
                            <img src="/assets/images/products/leningradsky-400.webp"
                                 alt="–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫ –∏–∑ –Ω–µ—Ä–∂–∞–≤–µ—é—â–µ–π —Å—Ç–∞–ª–∏"
                                 class="w-full h-48 object-cover rounded-lg mb-4"
                                 itemprop="image">
                            <div class="absolute top-2 right-2 bg-retro-gold text-white px-2 py-1 text-xs font-bold rounded">
                                PREMIUM
                            </div>
                        </div>

                        <h3 class="text-xl font-bold mb-2" itemprop="name">
                            –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP
                        </h3>

                        <div class="mb-4" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                            <span class="text-3xl font-bold text-retro-gold" itemprop="price">9300‚ÇΩ</span>
                            <meta itemprop="priceCurrency" content="RUB">
                        </div>

                        <ul class="text-sm text-gray-600 space-y-2 mb-6">
                            <li>‚úì –†–∞–∑–º–µ—Ä: 52√ó40 —Å–º</li>
                            <li>‚úì –ù–µ—Ä–∂–∞–≤–µ—é—â–∞—è —Å—Ç–∞–ª—å</li>
                            <li>‚úì –°—Ä–æ–∫ —Å–ª—É–∂–±—ã: 50+ –ª–µ—Ç</li>
                            <li>‚úì –ü—Ä–µ–º–∏—É–º LED –ø–æ–¥—Å–≤–µ—Ç–∫–∞</li>
                            <li>‚úì –†–µ–ª—å–µ—Ñ–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã</li>
                            <li>‚úì –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω</li>
                        </ul>

                        <button class="btn btn-primary w-full btn-order"
                                aria-label="–ó–∞–∫–∞–∑–∞—Ç—å –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫">
                            –ó–∞–∫–∞–∑–∞—Ç—å –∑–∞ 9300‚ÇΩ
                        </button>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- –ò—Å—Ç–æ—Ä–∏—è section, Social Proof, Order Form, FAQ —Å–µ–∫—Ü–∏–∏... -->

    <!-- Order Form Section -->
    <section id="order" class="py-20 bg-retro-blue"
             role="form" aria-label="–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-white mb-6 form-title">
                        –ó–∞–∫–∞–∑–∞—Ç—å —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫
                    </h2>
                    <p class="text-blue-100 text-lg">
                        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞
                    </p>
                </div>

                <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è) -->
                <div class="price-display mb-8">
                    <!-- JavaScript –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫ -->
                </div>

                <form id="order-form" class="form-container" novalidate>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="form-field">
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">
                                –í–∞—à–µ –∏–º—è *
                            </label>
                            <input type="text"
                                   id="name"
                                   name="name"
                                   class="form-input"
                                   required
                                   aria-required="true"
                                   placeholder="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤">
                        </div>

                        <div class="form-field">
                            <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">
                                –¢–µ–ª–µ—Ñ–æ–Ω *
                            </label>
                            <input type="tel"
                                   id="phone"
                                   name="phone"
                                   class="form-input"
                                   required
                                   aria-required="true"
                                   placeholder="+7 (999) 123-45-67">
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="form-field">
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                                Email
                            </label>
                            <input type="email"
                                   id="email"
                                   name="email"
                                   class="form-input"
                                   placeholder="example@mail.ru">
                        </div>

                        <div class="form-field">
                            <label for="model" class="block text-sm font-semibold text-gray-700 mb-2">
                                –ú–æ–¥–µ–ª—å *
                            </label>
                            <select id="model"
                                    name="model"
                                    class="form-input"
                                    required
                                    aria-required="true">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</option>
                                <option value="–û–±—ã—á–Ω—ã–π">–û–±—ã—á–Ω—ã–π (1990‚ÇΩ)</option>
                                <option value="–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π">–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π (4300‚ÇΩ)</option>
                                <option value="–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP">–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP (9300‚ÇΩ)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-field">
                        <label for="address" class="block text-sm font-semibold text-gray-700 mb-2">
                            –ê–¥—Ä–µ—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                        </label>
                        <input type="text"
                               id="address"
                               name="address"
                               class="form-input"
                               placeholder="–≥. –¢–æ–º—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1">
                    </div>

                    <div class="form-field">
                        <label for="comment" class="block text-sm font-semibold text-gray-700 mb-2">
                            –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
                        </label>
                        <textarea id="comment"
                                  name="comment"
                                  rows="4"
                                  class="form-input"
                                  placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –≤–æ–ø—Ä–æ—Å—ã..."></textarea>
                    </div>

                    <!-- SmartCaptcha -->
                    <div class="form-field">
                        <div id="captcha-container" class="flex justify-center"></div>
                        <input type="hidden" id="smart-token" name="smart-token">
                    </div>

                    <button type="submit"
                            class="btn btn-primary w-full text-lg py-4">
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                    </button>

                    <p class="text-sm text-gray-500 text-center mt-4">
                        –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å
                        <a href="/privacy" class="underline">–æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a>
                    </p>

                    <!-- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Å–≤—è–∑–∏ -->
                    <div class="mt-8 p-6 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold mb-4 text-center">
                            –ò–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é:
                        </h4>
                        <div class="grid md:grid-cols-3 gap-4 text-center">
                            <a href="tel:+79832322206"
                               class="flex items-center justify-center gap-2 p-3 bg-white rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                                </svg>
                                <span class="text-sm font-medium">+7 983 232-22-06</span>
                            </a>

                            <a href="https://wa.me/79832322206"
                               target="_blank"
                               class="flex items-center justify-center gap-2 p-3 bg-white rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"></path>
                                </svg>
                                <span class="text-sm font-medium">WhatsApp</span>
                            </a>

                            <a href="mailto:retroznak@mail.ru"
                               class="flex items-center justify-center gap-2 p-3 bg-white rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                </svg>
                                <span class="text-sm font-medium">Email</span>
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-20" role="region" aria-label="–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-retro-dark mb-6">
                    –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
                </h2>
                <p class="text-xl text-gray-600">
                    –û—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫–∞—Ö
                </p>
            </div>

            <div class="max-w-4xl mx-auto faq-section">
                <div class="faq-item">
                    <button class="faq-question"
                            aria-expanded="false"
                            aria-controls="faq-1">
                        <span>–°–∫–æ–ª—å–∫–æ —Å–ª—É–∂–∏—Ç —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫?</span>
                        <svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer" id="faq-1">
                        <p>–û–±—ã—á–Ω—ã–µ –∑–Ω–∞–∫–∏ —Å–ª—É–∂–∞—Ç 10-15 –ª–µ—Ç, —ç–º–∞–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π) ‚Äî 20+ –ª–µ—Ç,
                        –∞ VIP –∏–∑ –Ω–µ—Ä–∂–∞–≤–µ–π–∫–∏ ‚Äî –¥–æ 50 –ª–µ—Ç. –í—Å–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏ –ø–æ–∫—Ä—ã—Ç–∏—è.</p>
                    </div>
                </div>

                <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ FAQ —ç–ª–µ–º–µ–Ω—Ç—ã... -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer-section bg-retro-dark text-white py-12" role="contentinfo">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 text-retro-gold">–û–û–û "–¢—Ä–∏ –ö–∏—Ç–∞"</h3>
                    <p class="text-gray-300 mb-4">
                        –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –¥–æ–º–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º 1924 –≥–æ–¥–∞
                    </p>
                    <p class="text-sm text-gray-400">
                        634041, –≥.–¢–æ–º—Å–∫, —É–ª.–ï–Ω–∏—Å–µ–π—Å–∫–∞—è, –¥.32–±<br>
                        –û–ì–†–ù 1097017011079
                    </p>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li>
                            <a href="tel:+79832322206" class="hover:text-retro-gold transition-colors">
                                +7 983 232-22-06 (–¢–æ–º—Å–∫)
                            </a>
                        </li>
                        <li>
                            <a href="tel:+79681884715" class="hover:text-retro-gold transition-colors">
                                +7 968 188-47-15 (–°–ü–±)
                            </a>
                        </li>
                        <li>
                            <a href="mailto:retroznak@mail.ru" class="hover:text-retro-gold transition-colors">
                                retroznak@mail.ru
                            </a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h4>
                    <div class="flex space-x-4">
                        <a href="https://vk.com/retroznak"
                           target="_blank"
                           class="text-gray-400 hover:text-retro-gold transition-colors"
                           aria-label="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <!-- VK icon -->
                            </svg>
                        </a>
                        <a href="https://t.me/Rznak"
                           target="_blank"
                           class="text-gray-400 hover:text-retro-gold transition-colors"
                           aria-label="Telegram">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <!-- Telegram icon -->
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-700 pt-6 mt-8 text-center text-gray-400">
                <p>&copy; 2025 –û–û–û "–¢—Ä–∏ –ö–∏—Ç–∞". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script type="module" src="/assets/js/app.js"></script>

    <!-- SmartCaptcha -->
    <script src="https://smartcaptcha.yandexcloud.net/captcha.js" defer></script>

    <!-- Analytics Scripts -->
    <script>
        // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –∏ Google Analytics
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    </script>
</body>
</html>
```

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

**Critical Path Optimization:**
```html
<!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã -->
<link rel="preload" href="/assets/css/main.css" as="style">
<link rel="preload" href="/assets/js/app.js" as="script">
<link rel="preload" href="/assets/images/hero/hero-retroznak-800.webp" as="image" media="(max-width: 768px)">

<!-- DNS prefetch –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
<link rel="dns-prefetch" href="//cdn.tailwindcss.com">
<link rel="dns-prefetch" href="//smartcaptcha.yandexcloud.net">
<link rel="dns-prefetch" href="//mc.yandex.ru">

<!-- Preconnect –∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ—Å—É—Ä—Å–∞–º -->
<link rel="preconnect" href="//fonts.googleapis.com">
<link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
```

**Image Optimization Strategy:**
```javascript
// Lazy Loading —Å Intersection Observer
class LazyLoader {
  constructor() {
    this.imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          this.loadImage(entry.target);
          observer.unobserve(entry.target);
        }
      });
    }, {
      rootMargin: '50px' // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞ 50px –¥–æ –ø–æ–∫–∞–∑–∞
    });

    this.init();
  }

  init() {
    const lazyImages = document.querySelectorAll('img[data-src]');
    lazyImages.forEach(img => this.imageObserver.observe(img));
  }

  loadImage(img) {
    // WebP –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    const supportsWebP = this.checkWebPSupport();
    const src = supportsWebP && img.dataset.webp
      ? img.dataset.webp
      : img.dataset.src;

    img.src = src;
    img.classList.add('loaded');

    // –£–¥–∞–ª—è–µ–º data-–∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ DOM
    delete img.dataset.src;
    delete img.dataset.webp;
  }

  checkWebPSupport() {
    return document.createElement('canvas')
      .toDataURL('image/webp')
      .indexOf('data:image/webp') === 0;
  }
}
```

### Bundle Size Optimization

**CSS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
```css
/* –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤ head */
/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ */

/* –ò—Å–ø–æ–ª—å–∑—É–µ–º CSS containment –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
.product-card {
  contain: layout style paint;
}

.hero-section {
  contain: paint;
}

/* CSS Grid –¥–ª—è efficient layouts */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
}
```

**JavaScript Code Splitting:**
```javascript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
class AsyncModuleLoader {
  static async loadFormHandler() {
    const module = await import('./modules/form-handler.js');
    return module.FormHandler;
  }

  static async loadAnalytics() {
    const module = await import('./modules/analytics.js');
    return module.Analytics;
  }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–æ—Ä–º-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –¥–æ —Ñ–æ—Ä–º—ã
const orderSection = document.querySelector('#order');
const formObserver = new IntersectionObserver(async (entries) => {
  if (entries[0].isIntersecting) {
    const FormHandler = await AsyncModuleLoader.loadFormHandler();
    new FormHandler('#order-form');
    formObserver.disconnect();
  }
});

formObserver.observe(orderSection);
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Frontend –≤–∞–ª–∏–¥–∞—Ü–∏—è
```javascript
// utils/validation.js
export function validateForm(form, fieldsToValidate = null) {
  const errors = [];
  const fields = fieldsToValidate
    ? fieldsToValidate.map(name => form.querySelector(`[name="${name}"]`))
    : form.querySelectorAll('input, textarea, select');

  fields.forEach(field => {
    const validation = validateField(field);
    if (!validation.isValid) {
      errors.push({
        field: field.name,
        message: validation.message
      });
    }
  });

  return {
    isValid: errors.length === 0,
    errors
  };
}

function validateField(field) {
  const value = field.value.trim();
  const type = field.type;
  const required = field.hasAttribute('required');

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  if (required && !value) {
    return {
      isValid: false,
      message: '–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è'
    };
  }

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –ø–æ–ª—è
  switch (type) {
    case 'email':
      if (value && !isValidEmail(value)) {
        return {
          isValid: false,
          message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å'
        };
      }
      break;

    case 'tel':
      if (value && !isValidPhone(value)) {
        return {
          isValid: false,
          message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞'
        };
      }
      break;

    case 'text':
      if (field.name === 'name' && value && value.length < 2) {
        return {
          isValid: false,
          message: '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞'
        };
      }
      break;
  }

  return { isValid: true };
}

function isValidEmail(email) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

function isValidPhone(phone) {
  const phoneRegex = /^[\+]?[7|8]?[\s\-]?\(?[489]\d{2}\)?[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}$/;
  return phoneRegex.test(phone.replace(/\D/g, ''));
}

// –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è input
export function sanitizeInput(input) {
  return input
    .trim()
    .replace(/[<>]/g, '') // –£–¥–∞–ª—è–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    .substring(0, 500); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É
}
```

### CSRF Protection
```javascript
// utils/api.js
export async function apiRequest(url, options = {}) {
  // –î–æ–±–∞–≤–ª—è–µ–º CSRF —Ç–æ–∫–µ–Ω –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
  const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content;

  const defaultOptions = {
    headers: {
      'X-Requested-With': 'XMLHttpRequest',
      ...(csrfToken && { 'X-CSRF-TOKEN': csrfToken }),
      ...options.headers
    }
  };

  const response = await fetch(url, { ...defaultOptions, ...options });

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  return response.json();
}
```

---

## üîÑ Rollback & Recovery Procedures

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** ‚Äî —Å–∏—Å—Ç–µ–º–∞ feature flags –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä –æ—Ç–∫–∞—Ç–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –ª–µ–Ω–¥–∏–Ω–≥–∞.

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- **Zero-Downtime Deployment** ‚Äî —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∞–π—Ç–∞
- **Feature Toggles** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Instant Rollback** ‚Äî –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
- **Backup-First** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

---

### 1. üö© Feature Flags System (Vanilla Implementation)

#### –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π

**features.js** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:
```javascript
// js/features.js - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è feature flags
window.FeatureFlags = {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI
  components: {
    hero_section: true,              // Hero —Å–µ–∫—Ü–∏—è
    product_matrix: true,            // –¢–æ–≤–∞—Ä–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
    testimonials: true,              // –ë–ª–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
    order_form: true,                // –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞
    smart_captcha: true,             // SmartCaptcha –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
    analytics_tracking: true,        // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
    smooth_scroll: true,             // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
    image_lazy_loading: true         // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  },

  // –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏
  experiments: {
    new_hero_design: false,          // –ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω hero
    alternative_form: false,         // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞
    video_testimonials: false,       // –í–∏–¥–µ–æ –æ—Ç–∑—ã–≤—ã
    chat_widget: false              // –í–∏–¥–∂–µ—Ç —á–∞—Ç–∞
  },

  // –ê–≤–∞—Ä–∏–π–Ω—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
  emergency: {
    disable_all_js: false,           // –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ JS
    fallback_form: false,            // –†–µ–∑–µ—Ä–≤–Ω–∞—è —Ñ–æ—Ä–º–∞
    maintenance_mode: false          // –†–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
  },

  // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
  device_specific: {
    mobile_optimizations: true,      // –ú–æ–±–∏–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    desktop_animations: true,        // –ê–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
    tablet_layout: true             // –ü–ª–∞–Ω—à–µ—Ç–Ω—ã–π –º–∞–∫–µ—Ç
  }
};
```

#### –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–∞–º–∏

**feature-manager.js** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:
```javascript
// js/modules/feature-manager.js
class FeatureManager {
  constructor() {
    this.flags = window.FeatureFlags || {};
    this.init();
  }

  init() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤
    this.parseURLOverrides();

    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–ª–∞–≥–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        this.applyFeatureFlags();
      });
    } else {
      this.applyFeatureFlags();
    }
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
  isEnabled(flagPath) {
    const path = flagPath.split('.');
    let current = this.flags;

    for (const key of path) {
      if (current[key] === undefined) {
        console.warn(`Feature flag not found: ${flagPath}`);
        return false;
      }
      current = current[key];
    }

    return Boolean(current);
  }

  // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
  toggle(flagPath, value) {
    const path = flagPath.split('.');
    const key = path.pop();
    let current = this.flags;

    for (const pathKey of path) {
      if (!current[pathKey]) {
        current[pathKey] = {};
      }
      current = current[pathKey];
    }

    current[key] = value;

    // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    this.applyFeatureFlags();

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    console.log(`Feature flag ${flagPath} changed to: ${value}`);
  }

  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤ –∫ DOM —ç–ª–µ–º–µ–Ω—Ç–∞–º
  applyFeatureFlags() {
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å—Å—ã
    Object.entries(this.flags.components || {}).forEach(([feature, enabled]) => {
      const elements = document.querySelectorAll(`[data-feature="${feature}"]`);
      elements.forEach(element => {
        if (enabled) {
          element.classList.remove('feature-disabled');
          element.classList.add('feature-enabled');
        } else {
          element.classList.add('feature-disabled');
          element.classList.remove('feature-enabled');
        }
      });
    });

    // –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏
    Object.entries(this.flags.experiments || {}).forEach(([experiment, enabled]) => {
      const elements = document.querySelectorAll(`[data-experiment="${experiment}"]`);
      elements.forEach(element => {
        element.style.display = enabled ? 'block' : 'none';
      });
    });

    // –ê–≤–∞—Ä–∏–π–Ω—ã–µ —Ä–µ–∂–∏–º—ã
    if (this.isEnabled('emergency.disable_all_js')) {
      this.disableAllJavaScript();
    }

    if (this.isEnabled('emergency.maintenance_mode')) {
      this.showMaintenanceMode();
    }
  }

  // –ü–∞—Ä—Å–∏–Ω–≥ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  parseURLOverrides() {
    const urlParams = new URLSearchParams(window.location.search);
    const featurePrefix = 'feature_';

    for (const [key, value] of urlParams.entries()) {
      if (key.startsWith(featurePrefix)) {
        const flagPath = key.replace(featurePrefix, '').replace(/_/g, '.');
        const boolValue = value === 'true' || value === '1';
        this.toggle(flagPath, boolValue);
      }
    }
  }

  // –ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ JavaScript
  disableAllJavaScript() {
    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    const allElements = document.querySelectorAll('*');
    allElements.forEach(element => {
      const newElement = element.cloneNode(true);
      element.parentNode?.replaceChild(newElement, element);
    });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º fallback –∫–æ–Ω—Ç–µ–Ω—Ç
    document.body.classList.add('js-disabled-mode');
  }

  // –†–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
  showMaintenanceMode() {
    const maintenanceHTML = `
      <div id="maintenance-mode" style="
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.9); color: white; z-index: 99999;
        display: flex; align-items: center; justify-content: center;
        font-family: Arial, sans-serif; text-align: center;
      ">
        <div>
          <h1>üîß –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h1>
          <p>–°–∞–π—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏.<br>
          –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.</p>
          <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤: +7 983 232-22-06</strong></p>
        </div>
      </div>
    `;
    document.body.insertAdjacentHTML('beforeend', maintenanceHTML);
  }

  // –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  exportState() {
    return {
      timestamp: new Date().toISOString(),
      flags: JSON.parse(JSON.stringify(this.flags)),
      url: window.location.href,
      userAgent: navigator.userAgent
    };
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
  loadState(savedState) {
    this.flags = savedState.flags;
    this.applyFeatureFlags();
    console.log('Feature flags restored from backup:', savedState.timestamp);
  }
}

// –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.featureManager = new FeatureManager();

// API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
window.toggleFeature = (flagPath, value) => {
  window.featureManager.toggle(flagPath, value);
};
```

#### CSS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è feature flags

**feature-flags.css** ‚Äî —Å—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç—å—é:
```css
/* css/feature-flags.css */

/* –ë–∞–∑–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è feature flags */
.feature-disabled {
  display: none !important;
}

.feature-enabled {
  display: block;
}

/* –†–µ–∂–∏–º –±–µ–∑ JavaScript */
.js-disabled-mode {
  /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç */
}

.js-disabled-mode .js-only {
  display: none !important;
}

.js-disabled-mode .no-js-fallback {
  display: block !important;
}

/* –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ */
[data-experiment] {
  display: none; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç—ã */
}

[data-experiment].experiment-active {
  display: block;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ */
[data-feature] {
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.feature-disabled {
  opacity: 0;
  transform: translateY(-10px);
}

.feature-enabled {
  opacity: 1;
  transform: translateY(0);
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ */
.debug-mode [data-feature] {
  position: relative;
}

.debug-mode [data-feature]:before {
  content: attr(data-feature);
  position: absolute;
  top: -20px;
  left: 0;
  background: #333;
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  border-radius: 3px;
  z-index: 1000;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
@media (max-width: 768px) {
  .feature-mobile-hidden {
    display: none !important;
  }
}

/* –ü–ª–∞–Ω—à–µ—Ç–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
@media (min-width: 769px) and (max-width: 1024px) {
  .feature-tablet-hidden {
    display: none !important;
  }
}

/* –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
@media (min-width: 1025px) {
  .feature-desktop-hidden {
    display: none !important;
  }
}
```

---

### 2. üìã –ü–æ—à–∞–≥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç (< 5 –º–∏–Ω—É—Ç)

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ Emergency Rollback:**

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫
mv current_site current_site_broken
mv backup_site current_site

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
ln -sfn /path/to/backup/site /path/to/public_html
```

2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è –∞–≤–∞—Ä–∏–π–Ω—ã—Ö feature flags:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ admin –ø–∞–Ω–µ–ª—å
toggleFeature('emergency.maintenance_mode', true);
toggleFeature('emergency.disable_all_js', true);
toggleFeature('emergency.fallback_form', true);
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:**
```bash
# –¢–µ—Å—Ç —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
curl -X POST https://retroznak.ru/php/send-form.php \
  -F "name=Test" \
  -F "phone=+7900000000" \
  -F "model=leninsky"
```

#### –ü–ª–∞–Ω–æ–≤—ã–π –æ—Ç–∫–∞—Ç (15-30 –º–∏–Ω—É—Ç)

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ Planned Rollback:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∞–ø—à–æ—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è feature flags
const currentState = window.featureManager.exportState();
localStorage.setItem('rollback_state', JSON.stringify(currentState));
console.log('Current state saved for future rollback');
```

2. **–ü–æ—à–∞–≥–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:**
```javascript
// –û—Ç–∫–ª—é—á–∞–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
const experiments = [
  'experiments.new_hero_design',
  'experiments.alternative_form',
  'experiments.video_testimonials'
];

experiments.forEach((experiment, index) => {
  setTimeout(() => {
    toggleFeature(experiment, false);
    console.log(`Disabled: ${experiment}`);
  }, index * 2000); // –° –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 2 —Å–µ–∫—É–Ω–¥—ã
});
```

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏
function validateAfterRollback(featureName) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º Core Web Vitals
  new PerformanceObserver((list) => {
    const entries = list.getEntries();
    entries.forEach(entry => {
      console.log(`${entry.name}: ${entry.value}`);
    });
  }).observe({entryTypes: ['largest-contentful-paint', 'first-input', 'layout-shift']});

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É —Ñ–æ—Ä–º—ã
  const form = document.getElementById('order-form');
  if (form) {
    console.log(`Form validation passed after ${featureName} rollback`);
  }
}
```

#### Rollback Plan –¥–ª—è PHP Backend

**–û—Ç–∫–∞—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏:**

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è send-form.php:**
```php
<?php
// backup/send-form-backup.php
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é —Å timestamp
$backupFile = 'send-form-' . date('Y-m-d-H-i-s') . '.php.backup';
copy('send-form.php', 'backup/' . $backupFile);
?>
```

2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```php
// config/versions.php
<?php
return [
    'current' => '1.2.0',
    'previous' => '1.1.0',
    'backup_path' => '/path/to/backups/',
    'features' => [
        'smartcaptcha' => true,
        'rate_limiting' => true,
        'enhanced_validation' => true
    ]
];
?>
```

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç PHP:**
```php
// rollback.php - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–∫–∞—Ç–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏
<?php
function rollbackToVersion($targetVersion) {
    $backupFile = "backup/send-form-{$targetVersion}.php.backup";

    if (file_exists($backupFile)) {
        // –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
        copy('send-form.php', 'backup/send-form-current-rollback.php.backup');

        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é –≤–µ—Ä—Å–∏—é
        copy($backupFile, 'send-form.php');

        // –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–∫–∞—Ç
        error_log("Rollback completed: restored version {$targetVersion}");
        return true;
    }

    return false;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: rollbackToVersion('1.1.0');
?>
```

---

### 3. üíæ Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**backup-script.js** ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π:
```javascript
// scripts/backup-script.js (Node.js —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
const fs = require('fs');
const path = require('path');
const { execSync } = require('child_process');

class BackupManager {
  constructor() {
    this.backupDir = './backups';
    this.sourceDir = './';
    this.maxBackups = 10; // –•—Ä–∞–Ω–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –≤–µ—Ä—Å–∏–π

    this.ensureBackupDirectory();
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
  createFullBackup(label = '') {
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupName = `backup-${timestamp}${label ? '-' + label : ''}`;
    const backupPath = path.join(this.backupDir, backupName);

    console.log(`Creating backup: ${backupName}`);

    try {
      // –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ node_modules –∏ .git
      execSync(`xcopy "${this.sourceDir}" "${backupPath}" /E /I /H /K /X /Y /EXCLUDE:backup-exclude.txt`, {
        stdio: 'inherit'
      });

      // –°–æ–∑–¥–∞–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
      const manifest = {
        name: backupName,
        timestamp: new Date().toISOString(),
        label: label,
        files: this.getFileList(backupPath),
        features: this.getCurrentFeatureFlags(),
        version: this.getCurrentVersion()
      };

      fs.writeFileSync(
        path.join(backupPath, 'backup-manifest.json'),
        JSON.stringify(manifest, null, 2)
      );

      console.log(`‚úÖ Backup created successfully: ${backupName}`);
      this.cleanOldBackups();

      return backupPath;
    } catch (error) {
      console.error(`‚ùå Backup failed: ${error.message}`);
      return null;
    }
  }

  // –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  createQuickBackup() {
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupName = `quick-backup-${timestamp}`;
    const backupPath = path.join(this.backupDir, backupName);

    fs.mkdirSync(backupPath, { recursive: true });

    // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
    const criticalFiles = [
      'index.html',
      'css/main.css',
      'js/main.js',
      'js/features.js',
      'php/send-form.php',
      '.htaccess'
    ];

    criticalFiles.forEach(file => {
      if (fs.existsSync(file)) {
        const targetDir = path.dirname(path.join(backupPath, file));
        fs.mkdirSync(targetDir, { recursive: true });
        fs.copyFileSync(file, path.join(backupPath, file));
      }
    });

    console.log(`‚úÖ Quick backup created: ${backupName}`);
    return backupPath;
  }

  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
  restoreFromBackup(backupName) {
    const backupPath = path.join(this.backupDir, backupName);

    if (!fs.existsSync(backupPath)) {
      console.error(`‚ùå Backup not found: ${backupName}`);
      return false;
    }

    // –ß–∏—Ç–∞–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
    const manifestPath = path.join(backupPath, 'backup-manifest.json');
    if (fs.existsSync(manifestPath)) {
      const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));
      console.log(`Restoring backup: ${manifest.name} (${manifest.timestamp})`);
    }

    try {
      // –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      this.createQuickBackup();

      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª—ã
      execSync(`xcopy "${backupPath}" "${this.sourceDir}" /E /H /K /X /Y`, {
        stdio: 'inherit'
      });

      console.log(`‚úÖ Restore completed from: ${backupName}`);
      return true;
    } catch (error) {
      console.error(`‚ùå Restore failed: ${error.message}`);
      return false;
    }
  }

  // –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
  listBackups() {
    if (!fs.existsSync(this.backupDir)) {
      console.log('No backups found');
      return [];
    }

    const backups = fs.readdirSync(this.backupDir)
      .filter(name => fs.statSync(path.join(this.backupDir, name)).isDirectory())
      .map(name => {
        const backupPath = path.join(this.backupDir, name);
        const manifestPath = path.join(backupPath, 'backup-manifest.json');

        let manifest = { name, timestamp: 'unknown' };
        if (fs.existsSync(manifestPath)) {
          manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));
        }

        return manifest;
      })
      .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

    console.log('\nüìã Available backups:');
    backups.forEach((backup, index) => {
      console.log(`${index + 1}. ${backup.name} (${backup.timestamp})`);
    });

    return backups;
  }

  ensureBackupDirectory() {
    if (!fs.existsSync(this.backupDir)) {
      fs.mkdirSync(this.backupDir, { recursive: true });
    }
  }

  getFileList(dir) {
    const files = [];
    const items = fs.readdirSync(dir, { withFileTypes: true });

    items.forEach(item => {
      const fullPath = path.join(dir, item.name);
      if (item.isDirectory()) {
        files.push(...this.getFileList(fullPath));
      } else {
        files.push(path.relative(this.sourceDir, fullPath));
      }
    });

    return files;
  }

  getCurrentFeatureFlags() {
    try {
      const featuresPath = path.join(this.sourceDir, 'js/features.js');
      if (fs.existsSync(featuresPath)) {
        return fs.readFileSync(featuresPath, 'utf8');
      }
    } catch (error) {
      console.warn('Could not read feature flags');
    }
    return null;
  }

  getCurrentVersion() {
    try {
      const packagePath = path.join(this.sourceDir, 'package.json');
      if (fs.existsSync(packagePath)) {
        const pkg = JSON.parse(fs.readFileSync(packagePath, 'utf8'));
        return pkg.version;
      }
    } catch (error) {
      // –ï—Å–ª–∏ –Ω–µ—Ç package.json, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞—Ç—É
      return new Date().toISOString().split('T')[0];
    }
    return 'unknown';
  }

  cleanOldBackups() {
    const backups = this.listBackups();

    if (backups.length > this.maxBackups) {
      const toDelete = backups.slice(this.maxBackups);

      toDelete.forEach(backup => {
        const backupPath = path.join(this.backupDir, backup.name);
        try {
          fs.rmSync(backupPath, { recursive: true, force: true });
          console.log(`üóëÔ∏è Removed old backup: ${backup.name}`);
        } catch (error) {
          console.warn(`Could not remove backup ${backup.name}: ${error.message}`);
        }
      });
    }
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const backupManager = new BackupManager();

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
module.exports = { BackupManager };

// CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
if (require.main === module) {
  const action = process.argv[2];
  const param = process.argv[3];

  switch (action) {
    case 'create':
      backupManager.createFullBackup(param);
      break;
    case 'quick':
      backupManager.createQuickBackup();
      break;
    case 'restore':
      backupManager.restoreFromBackup(param);
      break;
    case 'list':
      backupManager.listBackups();
      break;
    default:
      console.log('Usage: node backup-script.js [create|quick|restore|list] [parameter]');
  }
}
```

#### –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**backup-exclude.txt** ‚Äî —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π:
```
node_modules\
.git\
.env
*.log
*.tmp
backups\
temp\
cache\
.DS_Store
Thumbs.db
```

---

### 4. üö® –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

#### Emergency Response Plan (ERP)

**1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ (0-2 –º–∏–Ω—É—Ç—ã):**

```javascript
// –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
console.log('üö® CRITICAL ERROR DETECTED - Executing emergency protocol');

// –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ä–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
toggleFeature('emergency.maintenance_mode', true);

// –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
toggleFeature('experiments.new_hero_design', false);
toggleFeature('experiments.alternative_form', false);

// –í–∫–ª—é—á–∞–µ–º fallback —Ñ–æ—Ä–º—ã
toggleFeature('emergency.fallback_form', true);

console.log('‚úÖ Emergency mode activated');
```

**2. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã (2-5 –º–∏–Ω—É—Ç):**

```javascript
// emergency-diagnostics.js
class EmergencyDiagnostics {
  constructor() {
    this.errors = [];
    this.startDiagnostics();
  }

  startDiagnostics() {
    console.log('üîç Starting emergency diagnostics...');

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
    this.checkCriticalSystems();
    this.checkNetworkConnectivity();
    this.checkFormFunctionality();
    this.checkJavaScriptErrors();
    this.generateDiagnosticReport();
  }

  checkCriticalSystems() {
    const critical = [
      { name: 'DOM Ready', test: () => document.readyState === 'complete' },
      { name: 'Feature Manager', test: () => typeof window.featureManager !== 'undefined' },
      { name: 'Order Form', test: () => document.getElementById('order-form') !== null },
      { name: 'SmartCaptcha', test: () => typeof window.smartCaptcha !== 'undefined' }
    ];

    critical.forEach(system => {
      try {
        const status = system.test();
        console.log(`${status ? '‚úÖ' : '‚ùå'} ${system.name}: ${status}`);
        if (!status) this.errors.push(`${system.name} failed`);
      } catch (error) {
        console.error(`‚ùå ${system.name}: ${error.message}`);
        this.errors.push(`${system.name}: ${error.message}`);
      }
    });
  }

  checkNetworkConnectivity() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
    const resources = [
      '/php/send-form.php',
      '/js/main.js',
      '/css/main.css'
    ];

    resources.forEach(resource => {
      fetch(resource, { method: 'HEAD' })
        .then(response => {
          const status = response.ok ? '‚úÖ' : '‚ùå';
          console.log(`${status} Resource ${resource}: ${response.status}`);
          if (!response.ok) this.errors.push(`Resource ${resource} unavailable`);
        })
        .catch(error => {
          console.error(`‚ùå Resource ${resource}: ${error.message}`);
          this.errors.push(`Resource ${resource}: ${error.message}`);
        });
    });
  }

  checkFormFunctionality() {
    const form = document.getElementById('order-form');
    if (form) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
      const requiredFields = form.querySelectorAll('[required]');
      const missingFields = [];

      requiredFields.forEach(field => {
        if (!field.name) {
          missingFields.push(field.id || field.className);
        }
      });

      if (missingFields.length > 0) {
        console.error('‚ùå Form missing required fields:', missingFields);
        this.errors.push(`Form missing fields: ${missingFields.join(', ')}`);
      } else {
        console.log('‚úÖ Form validation passed');
      }
    }
  }

  checkJavaScriptErrors() {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Ä–µ–º—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    window.addEventListener('error', (event) => {
      const error = {
        message: event.message,
        source: event.filename,
        line: event.lineno,
        column: event.colno
      };

      console.error('‚ùå JavaScript Error:', error);
      this.errors.push(`JS Error: ${error.message} at ${error.source}:${error.line}`);
    });
  }

  generateDiagnosticReport() {
    setTimeout(() => {
      const report = {
        timestamp: new Date().toISOString(),
        url: window.location.href,
        userAgent: navigator.userAgent,
        errors: this.errors,
        featureFlags: window.FeatureFlags,
        performance: this.getPerformanceMetrics()
      };

      console.log('üìã DIAGNOSTIC REPORT:', report);

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—á–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
      localStorage.setItem('emergency-diagnostic-report', JSON.stringify(report));

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
      this.sendDiagnosticReport(report);

      return report;
    }, 3000);
  }

  getPerformanceMetrics() {
    const navigation = performance.getEntriesByType('navigation')[0];
    return {
      loadTime: navigation?.loadEventEnd - navigation?.fetchStart,
      domContentLoaded: navigation?.domContentLoadedEventEnd - navigation?.fetchStart,
      firstPaint: performance.getEntriesByName('first-paint')[0]?.startTime,
      firstContentfulPaint: performance.getEntriesByName('first-contentful-paint')[0]?.startTime
    };
  }

  sendDiagnosticReport(report) {
    fetch('/php/emergency-report.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(report)
    }).catch(error => {
      console.log('Could not send diagnostic report to server:', error.message);
    });
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
window.runEmergencyDiagnostics = () => {
  return new EmergencyDiagnostics();
};
```

**3. –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (5-10 –º–∏–Ω—É—Ç):**

```javascript
// emergency-fixes.js
class EmergencyFixes {
  constructor() {
    this.fixes = [
      { name: 'Reload SmartCaptcha', fix: () => this.reloadSmartCaptcha() },
      { name: 'Reset Form State', fix: () => this.resetFormState() },
      { name: 'Clear Local Storage', fix: () => this.clearLocalStorage() },
      { name: 'Restart Analytics', fix: () => this.restartAnalytics() },
      { name: 'Force CSS Reload', fix: () => this.reloadCSS() }
    ];
  }

  applyAllFixes() {
    console.log('üîß Applying emergency fixes...');

    this.fixes.forEach(fix => {
      try {
        fix.fix();
        console.log(`‚úÖ ${fix.name} - Applied successfully`);
      } catch (error) {
        console.error(`‚ùå ${fix.name} - Failed:`, error.message);
      }
    });
  }

  reloadSmartCaptcha() {
    if (window.smartCaptcha) {
      const container = document.getElementById('captcha-container');
      if (container) {
        container.innerHTML = '';
        window.smartCaptcha.render('captcha-container', {
          sitekey: window.FeatureFlags.smartcaptcha?.sitekey
        });
      }
    }
  }

  resetFormState() {
    const forms = document.querySelectorAll('form');
    forms.forEach(form => {
      form.reset();
      // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      form.querySelectorAll('.error, .invalid').forEach(el => {
        el.classList.remove('error', 'invalid');
      });
    });
  }

  clearLocalStorage() {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    const criticalData = {
      featureFlags: localStorage.getItem('featureFlags'),
      diagnosticReport: localStorage.getItem('emergency-diagnostic-report')
    };

    localStorage.clear();

    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    Object.entries(criticalData).forEach(([key, value]) => {
      if (value) localStorage.setItem(key, value);
    });
  }

  restartAnalytics() {
    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    if (window.gtag) {
      gtag('config', 'GA_MEASUREMENT_ID');
    }

    if (window.ym) {
      ym(window.yaCounterId, 'init');
    }
  }

  reloadCSS() {
    const links = document.querySelectorAll('link[rel="stylesheet"]');
    links.forEach(link => {
      const href = link.href;
      link.href = href + (href.includes('?') ? '&' : '?') + 'v=' + Date.now();
    });
  }
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
window.applyEmergencyFixes = () => {
  const fixes = new EmergencyFixes();
  fixes.applyAllFixes();
};
```

**4. –≠—Å–∫–∞–ª–∞—Ü–∏—è (10+ –º–∏–Ω—É—Ç):**

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞ –±—ã—Å—Ç—Ä—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:

```bash
# –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏
node backup-script.js restore latest-stable

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏
cp emergency-static/index.html ./index.html
cp emergency-static/css/* ./css/
```

---

### 5. üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

#### Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**performance-monitor.js** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```javascript
// js/modules/performance-monitor.js
class PerformanceMonitor {
  constructor() {
    this.metrics = [];
    this.thresholds = {
      lcp: 2500,        // Large Contentful Paint
      fid: 100,         // First Input Delay
      cls: 0.1,         // Cumulative Layout Shift
      ttfb: 800,        // Time To First Byte
      jsErrors: 5       // Max JS errors per session
    };

    this.alertEndpoint = '/php/performance-alert.php';
    this.init();
  }

  init() {
    this.trackCoreWebVitals();
    this.trackJavaScriptErrors();
    this.trackFormSubmissions();
    this.trackUserInteractions();

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á–µ—Ç –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
    setInterval(() => this.sendMetrics(), 30000);

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
    window.addEventListener('beforeunload', () => this.sendFinalReport());
  }

  trackCoreWebVitals() {
    // Largest Contentful Paint
    new PerformanceObserver((list) => {
      const entries = list.getEntries();
      entries.forEach(entry => {
        const metric = {
          name: 'lcp',
          value: entry.startTime,
          timestamp: Date.now(),
          url: window.location.href
        };

        this.recordMetric(metric);

        if (entry.startTime > this.thresholds.lcp) {
          this.sendAlert('LCP threshold exceeded', metric);
        }
      });
    }).observe({entryTypes: ['largest-contentful-paint']});

    // First Input Delay
    new PerformanceObserver((list) => {
      const entries = list.getEntries();
      entries.forEach(entry => {
        const metric = {
          name: 'fid',
          value: entry.processingStart - entry.startTime,
          timestamp: Date.now(),
          url: window.location.href
        };

        this.recordMetric(metric);

        if (metric.value > this.thresholds.fid) {
          this.sendAlert('FID threshold exceeded', metric);
        }
      });
    }).observe({entryTypes: ['first-input']});

    // Cumulative Layout Shift
    new PerformanceObserver((list) => {
      let clsValue = 0;
      const entries = list.getEntries();

      entries.forEach(entry => {
        if (!entry.hadRecentInput) {
          clsValue += entry.value;
        }
      });

      const metric = {
        name: 'cls',
        value: clsValue,
        timestamp: Date.now(),
        url: window.location.href
      };

      this.recordMetric(metric);

      if (clsValue > this.thresholds.cls) {
        this.sendAlert('CLS threshold exceeded', metric);
      }
    }).observe({entryTypes: ['layout-shift']});
  }

  trackJavaScriptErrors() {
    let errorCount = 0;

    window.addEventListener('error', (event) => {
      errorCount++;

      const errorMetric = {
        name: 'js_error',
        message: event.message,
        source: event.filename,
        line: event.lineno,
        column: event.colno,
        stack: event.error?.stack,
        timestamp: Date.now(),
        url: window.location.href,
        userAgent: navigator.userAgent
      };

      this.recordMetric(errorMetric);

      if (errorCount > this.thresholds.jsErrors) {
        this.sendAlert('Too many JavaScript errors', {
          count: errorCount,
          latestError: errorMetric
        });
      }
    });

    // Unhandled promise rejections
    window.addEventListener('unhandledrejection', (event) => {
      const errorMetric = {
        name: 'unhandled_promise_rejection',
        reason: event.reason?.toString(),
        timestamp: Date.now(),
        url: window.location.href
      };

      this.recordMetric(errorMetric);
      this.sendAlert('Unhandled promise rejection', errorMetric);
    });
  }

  trackFormSubmissions() {
    document.addEventListener('submit', (event) => {
      const form = event.target;
      const startTime = Date.now();

      const formMetric = {
        name: 'form_submission_start',
        formId: form.id,
        timestamp: startTime,
        url: window.location.href
      };

      this.recordMetric(formMetric);

      // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
      const trackResponse = () => {
        const endTime = Date.now();
        const responseTime = endTime - startTime;

        const responseMetric = {
          name: 'form_submission_time',
          formId: form.id,
          responseTime: responseTime,
          timestamp: endTime,
          url: window.location.href
        };

        this.recordMetric(responseMetric);

        if (responseTime > 5000) { // –ë–æ–ª–µ–µ 5 —Å–µ–∫—É–Ω–¥
          this.sendAlert('Slow form submission', responseMetric);
        }
      };

      // –ò—Å–ø–æ–ª—å–∑—É–µ–º MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList' || mutation.type === 'attributes') {
            trackResponse();
            observer.disconnect();
          }
        });
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true,
        attributes: true
      });

      // Fallback timeout
      setTimeout(() => {
        trackResponse();
        observer.disconnect();
      }, 10000);
    });
  }

  trackUserInteractions() {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –≤–∞–∂–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
    const importantElements = [
      '[data-track="order-button"]',
      '[data-track="phone-link"]',
      '[data-track="email-link"]',
      '.product-card',
      '#order-form button[type="submit"]'
    ];

    importantElements.forEach(selector => {
      document.addEventListener('click', (event) => {
        if (event.target.matches(selector) || event.target.closest(selector)) {
          const interactionMetric = {
            name: 'user_interaction',
            element: selector,
            timestamp: Date.now(),
            url: window.location.href
          };

          this.recordMetric(interactionMetric);
        }
      });
    });
  }

  recordMetric(metric) {
    this.metrics.push(metric);

    // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –º–µ—Ç—Ä–∏–∫ –≤ –ø–∞–º—è—Ç–∏
    if (this.metrics.length > 100) {
      this.metrics = this.metrics.slice(-100);
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ localStorage
    if (this.isCriticalMetric(metric)) {
      const stored = JSON.parse(localStorage.getItem('critical-metrics') || '[]');
      stored.push(metric);
      localStorage.setItem('critical-metrics', JSON.stringify(stored.slice(-20)));
    }
  }

  isCriticalMetric(metric) {
    const criticalTypes = ['js_error', 'unhandled_promise_rejection', 'form_submission_time'];
    return criticalTypes.includes(metric.name) || metric.value > (this.thresholds[metric.name] || Infinity);
  }

  sendAlert(alertType, data) {
    const alert = {
      type: alertType,
      severity: this.getAlertSeverity(alertType, data),
      data: data,
      timestamp: new Date().toISOString(),
      url: window.location.href,
      userAgent: navigator.userAgent,
      sessionMetrics: this.getSessionSummary()
    };

    console.warn(`üö® PERFORMANCE ALERT: ${alertType}`, alert);

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞–ª–µ—Ä—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    fetch(this.alertEndpoint, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(alert)
    }).catch(error => {
      console.error('Failed to send performance alert:', error);
    });

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–ª–µ—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ
    const storedAlerts = JSON.parse(localStorage.getItem('performance-alerts') || '[]');
    storedAlerts.push(alert);
    localStorage.setItem('performance-alerts', JSON.stringify(storedAlerts.slice(-10)));
  }

  getAlertSeverity(alertType, data) {
    const severityMap = {
      'LCP threshold exceeded': data.value > 4000 ? 'critical' : 'warning',
      'FID threshold exceeded': data.value > 300 ? 'critical' : 'warning',
      'CLS threshold exceeded': data.value > 0.25 ? 'critical' : 'warning',
      'Too many JavaScript errors': data.count > 10 ? 'critical' : 'warning',
      'Slow form submission': data.responseTime > 10000 ? 'critical' : 'warning'
    };

    return severityMap[alertType] || 'info';
  }

  getSessionSummary() {
    const summary = {
      totalMetrics: this.metrics.length,
      errors: this.metrics.filter(m => m.name.includes('error')).length,
      interactions: this.metrics.filter(m => m.name === 'user_interaction').length,
      sessionDuration: Date.now() - (this.sessionStart || Date.now())
    };

    // –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è Core Web Vitals
    ['lcp', 'fid', 'cls'].forEach(metric => {
      const values = this.metrics.filter(m => m.name === metric).map(m => m.value);
      if (values.length > 0) {
        summary[`avg_${metric}`] = values.reduce((a, b) => a + b, 0) / values.length;
      }
    });

    return summary;
  }

  sendMetrics() {
    if (this.metrics.length === 0) return;

    const batch = {
      timestamp: new Date().toISOString(),
      url: window.location.href,
      metrics: [...this.metrics],
      summary: this.getSessionSummary()
    };

    fetch('/php/metrics-collector.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(batch)
    }).catch(error => {
      console.warn('Failed to send metrics batch:', error);
    });

    // –û—á–∏—â–∞–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    this.metrics = [];
  }

  sendFinalReport() {
    const finalReport = {
      type: 'session_end',
      timestamp: new Date().toISOString(),
      url: window.location.href,
      summary: this.getSessionSummary(),
      criticalMetrics: JSON.parse(localStorage.getItem('critical-metrics') || '[]'),
      alerts: JSON.parse(localStorage.getItem('performance-alerts') || '[]')
    };

    navigator.sendBeacon('/php/final-report.php', JSON.stringify(finalReport));
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
const performanceMonitor = new PerformanceMonitor();
window.performanceMonitor = performanceMonitor;
```

#### Email –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º

**PHP backend –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤:**

```php
<?php
// php/performance-alert.php
class PerformanceAlertHandler {
    private $alertEmail = 'admin@retroznak.ru';
    private $logFile = '../logs/performance-alerts.log';

    public function handleAlert() {
        $input = json_decode(file_get_contents('php://input'), true);

        if (!$input || !isset($input['type'])) {
            http_response_code(400);
            echo json_encode(['error' => 'Invalid alert data']);
            return;
        }

        // –õ–æ–≥–∏—Ä—É–µ–º –∞–ª–µ—Ä—Ç
        $this->logAlert($input);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å
        if ($input['severity'] === 'critical') {
            $this->sendImmediateAlert($input);
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–∞—Å—Ç–æ—Ç—É –∞–ª–µ—Ä—Ç–æ–≤
        if ($this->isAlertStorm()) {
            $this->sendAlertStormNotification();
        }

        echo json_encode(['status' => 'received']);
    }

    private function logAlert($alert) {
        $logEntry = [
            'timestamp' => date('Y-m-d H:i:s'),
            'alert' => $alert,
            'ip' => $_SERVER['REMOTE_ADDR'] ?? 'unknown'
        ];

        file_put_contents($this->logFile, json_encode($logEntry) . PHP_EOL, FILE_APPEND | LOCK_EX);
    }

    private function sendImmediateAlert($alert) {
        $subject = 'üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–µ—Ä—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ - –†–µ—Ç—Ä–æ–∑–Ω–∞–∫';

        $message = "–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–õ–ï–†–¢ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò\n\n";
        $message .= "–¢–∏–ø: {$alert['type']}\n";
        $message .= "–í—Ä–µ–º—è: {$alert['timestamp']}\n";
        $message .= "URL: {$alert['url']}\n";
        $message .= "–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å: {$alert['severity']}\n\n";

        if (isset($alert['data'])) {
            $message .= "–î–∞–Ω–Ω—ã–µ:\n";
            $message .= json_encode($alert['data'], JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE) . "\n\n";
        }

        if (isset($alert['sessionMetrics'])) {
            $message .= "–ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–∏:\n";
            $message .= "–û—à–∏–±–∫–∏: {$alert['sessionMetrics']['errors']}\n";
            $message .= "–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è: {$alert['sessionMetrics']['interactions']}\n";
            $message .= "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: " . ($alert['sessionMetrics']['sessionDuration']/1000) . " —Å–µ–∫\n\n";
        }

        $message .= "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:\n";
        $message .= $this->getRecommendedActions($alert['type']);

        $headers = "From: noreply@retroznak.ru\r\n";
        $headers .= "Reply-To: noreply@retroznak.ru\r\n";
        $headers .= "X-Priority: 1\r\n"; // –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

        mail($this->alertEmail, $subject, $message, $headers);
    }

    private function getRecommendedActions($alertType) {
        $actions = [
            'LCP threshold exceeded' => "1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π\n2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CDN\n3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å emergency —Ä–µ–∂–∏–º –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ",
            'Too many JavaScript errors' => "1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞\n2. –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è JS\n3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º –±–µ–∑ JavaScript",
            'Slow form submission' => "1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PHP —Å–∫—Ä–∏–ø—Ç send-form.php\n2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SmartCaptcha\n3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å fallback —Ñ–æ—Ä–º—É"
        ];

        return $actions[$alertType] ?? "1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏\n2. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π\n3. –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º";
    }

    private function isAlertStorm() {
        $recentAlerts = $this->getRecentAlerts(600); // –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç
        return count($recentAlerts) > 10;
    }

    private function getRecentAlerts($seconds) {
        if (!file_exists($this->logFile)) return [];

        $lines = file($this->logFile, FILE_IGNORE_NEW_LINES);
        $cutoff = time() - $seconds;
        $recentAlerts = [];

        foreach (array_reverse($lines) as $line) {
            $alert = json_decode($line, true);
            if ($alert && strtotime($alert['timestamp']) > $cutoff) {
                $recentAlerts[] = $alert;
            }
        }

        return $recentAlerts;
    }

    private function sendAlertStormNotification() {
        $subject = '‚ö†Ô∏è Alert Storm Detected - –†–µ—Ç—Ä–æ–∑–Ω–∞–∫';
        $message = "–û–±–Ω–∞—Ä—É–∂–µ–Ω —à—Ç–æ—Ä–º –∞–ª–µ—Ä—Ç–æ–≤! –ë–æ–ª–µ–µ 10 –∞–ª–µ—Ä—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç.\n\n";
        $message .= "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:\n";
        $message .= "1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å maintenance —Ä–µ–∂–∏–º\n";
        $message .= "2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞\n";
        $message .= "3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π\n\n";
        $message .= "URL –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ emergency —Ä–µ–∂–∏–º–∞:\n";
        $message .= "https://retroznak.ru/?feature_emergency.maintenance_mode=true";

        mail($this->alertEmail, $subject, $message);
    }
}

$handler = new PerformanceAlertHandler();
$handler->handleAlert();
?>
```

---

### 6. üîÑ –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞

#### Version Switcher System

**version-switcher.js** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π:
```javascript
// js/modules/version-switcher.js
class VersionSwitcher {
  constructor() {
    this.versions = {
      'stable': {
        name: 'Stable Version',
        files: {
          html: 'versions/stable/index.html',
          css: 'versions/stable/css/main.css',
          js: 'versions/stable/js/main.js'
        },
        features: {
          'components.hero_section': true,
          'components.product_matrix': true,
          'components.testimonials': true,
          'components.order_form': true,
          'components.smart_captcha': true
        }
      },
      'beta': {
        name: 'Beta Version',
        files: {
          html: 'versions/beta/index.html',
          css: 'versions/beta/css/main.css',
          js: 'versions/beta/js/main.js'
        },
        features: {
          'components.hero_section': true,
          'components.product_matrix': true,
          'components.testimonials': true,
          'components.order_form': true,
          'components.smart_captcha': true,
          'experiments.new_hero_design': true,
          'experiments.alternative_form': true
        }
      },
      'emergency': {
        name: 'Emergency Static',
        files: {
          html: 'versions/emergency/index.html',
          css: 'versions/emergency/css/emergency.css',
          js: null // –ë–µ–∑ JavaScript
        },
        features: {
          'components.hero_section': true,
          'components.product_matrix': true,
          'components.order_form': true,
          'emergency.fallback_form': true,
          'emergency.disable_all_js': true
        }
      }
    };

    this.currentVersion = 'stable';
    this.init();
  }

  init() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π
    this.checkURLVersion();

    // –°–æ–∑–¥–∞–µ–º –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    if (this.isDevelopmentMode()) {
      this.createVersionPanel();
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
    this.setupEmergencySwitch();
  }

  checkURLVersion() {
    const urlParams = new URLSearchParams(window.location.search);
    const versionParam = urlParams.get('version');

    if (versionParam && this.versions[versionParam]) {
      this.switchToVersion(versionParam);
    }
  }

  switchToVersion(versionName) {
    if (!this.versions[versionName]) {
      console.error(`Version ${versionName} not found`);
      return false;
    }

    const version = this.versions[versionName];
    console.log(`Switching to version: ${version.name}`);

    try {
      // –û–±–Ω–æ–≤–ª—è–µ–º feature flags
      this.updateFeatureFlags(version.features);

      // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
      this.loadVersionResources(version);

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
      this.currentVersion = versionName;
      localStorage.setItem('current-version', versionName);

      console.log(`‚úÖ Successfully switched to ${version.name}`);
      return true;
    } catch (error) {
      console.error(`‚ùå Failed to switch to ${version.name}:`, error);

      // –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
      if (versionName !== 'stable') {
        this.switchToVersion('stable');
      }
      return false;
    }
  }

  updateFeatureFlags(features) {
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ñ–ª–∞–≥–∏
    Object.keys(window.FeatureFlags).forEach(category => {
      Object.keys(window.FeatureFlags[category]).forEach(flag => {
        window.FeatureFlags[category][flag] = false;
      });
    });

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–µ —Ñ–ª–∞–≥–∏
    Object.entries(features).forEach(([flagPath, value]) => {
      const path = flagPath.split('.');
      let current = window.FeatureFlags;

      for (let i = 0; i < path.length - 1; i++) {
        if (!current[path[i]]) {
          current[path[i]] = {};
        }
        current = current[path[i]];
      }

      current[path[path.length - 1]] = value;
    });

    // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    if (window.featureManager) {
      window.featureManager.applyFeatureFlags();
    }
  }

  loadVersionResources(version) {
    const promises = [];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º CSS
    if (version.files.css) {
      promises.push(this.loadCSS(version.files.css));
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º JavaScript
    if (version.files.js) {
      promises.push(this.loadJS(version.files.js));
    }

    return Promise.all(promises);
  }

  loadCSS(url) {
    return new Promise((resolve, reject) => {
      // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ CSS —Ñ–∞–π–ª—ã –≤–µ—Ä—Å–∏–π
      document.querySelectorAll('link[data-version-css]').forEach(link => {
        link.remove();
      });

      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = url + '?v=' + Date.now();
      link.setAttribute('data-version-css', 'true');

      link.onload = resolve;
      link.onerror = reject;

      document.head.appendChild(link);
    });
  }

  loadJS(url) {
    return new Promise((resolve, reject) => {
      // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ JS —Ñ–∞–π–ª—ã –≤–µ—Ä—Å–∏–π
      document.querySelectorAll('script[data-version-js]').forEach(script => {
        script.remove();
      });

      const script = document.createElement('script');
      script.src = url + '?v=' + Date.now();
      script.setAttribute('data-version-js', 'true');

      script.onload = resolve;
      script.onerror = reject;

      document.head.appendChild(script);
    });
  }

  setupEmergencySwitch() {
    let errorCount = 0;

    window.addEventListener('error', () => {
      errorCount++;

      if (errorCount >= 5 && this.currentVersion !== 'emergency') {
        console.warn('üö® Too many errors detected, switching to emergency version');
        this.switchToVersion('emergency');
      }
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    setTimeout(() => {
      const navigation = performance.getEntriesByType('navigation')[0];
      const loadTime = navigation?.loadEventEnd - navigation?.fetchStart;

      if (loadTime > 10000 && this.currentVersion !== 'emergency') { // –ë–æ–ª–µ–µ 10 —Å–µ–∫—É–Ω–¥
        console.warn('üö® Poor performance detected, switching to emergency version');
        this.switchToVersion('emergency');
      }
    }, 15000);
  }

  createVersionPanel() {
    const panel = document.createElement('div');
    panel.id = 'version-switcher-panel';
    panel.innerHTML = `
      <div style="
        position: fixed; top: 10px; right: 10px;
        background: rgba(0,0,0,0.8); color: white;
        padding: 10px; border-radius: 5px;
        z-index: 99999; font-family: monospace;
        font-size: 12px;
      ">
        <div>Current: <span id="current-version">${this.currentVersion}</span></div>
        <div style="margin-top: 5px;">
          ${Object.entries(this.versions).map(([key, version]) =>
            `<button onclick="versionSwitcher.switchToVersion('${key}')"
             style="margin-right: 5px; padding: 2px 6px; font-size: 10px;">
             ${version.name}
            </button>`
          ).join('')}
        </div>
        <div style="margin-top: 5px;">
          <button onclick="document.getElementById('version-switcher-panel').style.display='none'"
           style="padding: 2px 6px; font-size: 10px;">
           Hide
          </button>
        </div>
      </div>
    `;

    document.body.appendChild(panel);
  }

  isDevelopmentMode() {
    return window.location.hostname === 'localhost' ||
           window.location.search.includes('dev=true') ||
           localStorage.getItem('dev-mode') === 'true';
  }

  // API –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  getVersions() {
    return Object.keys(this.versions);
  }

  getCurrentVersion() {
    return this.currentVersion;
  }

  // –≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  exportVersionState() {
    return {
      currentVersion: this.currentVersion,
      featureFlags: window.FeatureFlags,
      timestamp: new Date().toISOString()
    };
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π
window.versionSwitcher = new VersionSwitcher();

// –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
window.switchVersion = (version) => window.versionSwitcher.switchToVersion(version);
window.getVersions = () => window.versionSwitcher.getVersions();
window.getCurrentVersion = () => window.versionSwitcher.getCurrentVersion();
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –¥–ª—è –≤–µ—Ä—Å–∏–π

```
–ª–µ–Ω–¥–∏–Ω–≥-—Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫/
‚îú‚îÄ‚îÄ versions/
‚îÇ   ‚îú‚îÄ‚îÄ stable/                 # –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/main.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/main.js
‚îÇ   ‚îú‚îÄ‚îÄ beta/                   # –ë–µ—Ç–∞ –≤–µ—Ä—Å–∏—è —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏—á–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/main.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/main.js
‚îÇ   ‚îî‚îÄ‚îÄ emergency/              # –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ index.html          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ css/emergency.css   # –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îÇ       ‚îú‚îÄ‚îÄ version-switcher.js
‚îÇ       ‚îú‚îÄ‚îÄ feature-manager.js
‚îÇ       ‚îî‚îÄ‚îÄ performance-monitor.js
‚îî‚îÄ‚îÄ current -> versions/stable/  # –°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
```

#### –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ URL

```
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –±–µ—Ç–∞ –≤–µ—Ä—Å–∏—é
https://retroznak.ru/?version=beta

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
https://retroznak.ru/?version=emergency

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∏—á
https://retroznak.ru/?version=beta&feature_experiments.new_hero_design=true

# –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è maintenance —Ä–µ–∂–∏–º–∞
https://retroznak.ru/?feature_emergency.maintenance_mode=true
```

---

## üìã Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Rollback —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

**Feature Flags:**
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `js/features.js` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `FeatureManager` –∫–ª–∞—Å—Å
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã CSS —Å—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç—å—é
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**Backup —Å–∏—Å—Ç–µ–º–∞:**
- [ ] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è backup –ø–µ—Ä–µ–¥ deploy
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞–Ω —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π backup-exclude.txt

**Emergency –ø—Ä–æ—Ü–µ–¥—É—Ä—ã:**
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è emergency –≤–µ—Ä—Å–∏—è
- [ ] –°–æ–∑–¥–∞–Ω diagnostic —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã emergency fixes

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω PerformanceMonitor –∫–ª–∞—Å—Å
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
- [ ] –°–æ–∑–¥–∞–Ω PHP endpoint –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ email —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**Version switching:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω VersionSwitcher –∫–ª–∞—Å—Å
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –¥–ª—è –≤–µ—Ä—Å–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ URL
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª rollback
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ emergency —Ä–µ–∂–∏–º–æ–≤
- [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ URL –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã email –∞–ª–µ—Ä—Ç—ã

---

*–°–µ–∫—Ü–∏—è "Rollback & Recovery Procedures" –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞!*

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

### Event Tracking Strategy
```javascript
// modules/analytics.js
export class Analytics {
  constructor() {
    this.events = [];
    this.init();
  }

  init() {
    this.setupGoals();
    this.trackUserBehavior();
  }

  setupGoals() {
    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ —Ü–µ–ª–∏
    this.yandexGoals = {
      FORM_SUBMIT: 'ORDER_FORM_SUBMIT',
      PRODUCT_SELECT: 'PRODUCT_SELECTED',
      PHONE_CLICK: 'PHONE_CLICKED',
      EMAIL_CLICK: 'EMAIL_CLICKED'
    };

    // Google Analytics —Å–æ–±—ã—Ç–∏—è
    this.gaEvents = {
      FORM_SUBMIT: 'form_submit',
      PRODUCT_SELECT: 'select_item',
      CONTACT_CLICK: 'contact_click'
    };
  }

  trackPageView() {
    // Google Analytics 4
    if (window.gtag) {
      gtag('config', 'G-XXXXXXXXXX', {
        page_title: document.title,
        page_location: window.location.href
      });
    }

    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (window.ym) {
      ym(YANDEX_METRIKA_ID, 'hit', window.location.href);
    }
  }

  trackFormSubmit(formData) {
    const model = formData.get('model');

    // Google Analytics
    if (window.gtag) {
      gtag('event', this.gaEvents.FORM_SUBMIT, {
        'event_category': 'engagement',
        'event_label': model,
        'value': this.getModelPrice(model)
      });
    }

    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (window.ym) {
      ym(YANDEX_METRIKA_ID, 'reachGoal', this.yandexGoals.FORM_SUBMIT, {
        model: model,
        price: this.getModelPrice(model)
      });
    }
  }

  trackProductSelection(productName) {
    // Google Analytics
    if (window.gtag) {
      gtag('event', this.gaEvents.PRODUCT_SELECT, {
        'item_category': 'retroznak',
        'item_name': productName,
        'item_id': productName.toLowerCase().replace(/\s+/g, '_')
      });
    }

    // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
    if (window.ym) {
      ym(YANDEX_METRIKA_ID, 'reachGoal', this.yandexGoals.PRODUCT_SELECT, {
        product: productName
      });
    }
  }

  trackUserBehavior() {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    this.startTime = Date.now();

    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
    this.maxScroll = 0;
    window.addEventListener('scroll', () => {
      const scrollPercent = Math.round(
        (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100
      );
      this.maxScroll = Math.max(this.maxScroll, scrollPercent);
    });

    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('beforeunload', () => {
      this.trackEngagement();
    });
  }

  trackEngagement() {
    const timeOnPage = Math.round((Date.now() - this.startTime) / 1000);

    if (window.gtag) {
      gtag('event', 'engagement', {
        'event_category': 'user_behavior',
        'time_on_page': timeOnPage,
        'scroll_depth': this.maxScroll
      });
    }
  }

  getModelPrice(model) {
    const prices = {
      '–û–±—ã—á–Ω—ã–π': 1990,
      '–ü–µ—Ç—Ä–æ–≥—Ä–∞–¥—Å–∫–∏–π': 4300,
      '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∏–π VIP': 9300
    };
    return prices[model] || 0;
  }
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ

### Cross-browser Testing Checklist
```markdown
## Browser Support Matrix

### Desktop Browsers
- [ ] Chrome 90+ (Windows, macOS, Linux)
- [ ] Firefox 88+ (Windows, macOS, Linux)
- [ ] Safari 14+ (macOS)
- [ ] Edge 90+ (Windows, macOS)

### Mobile Browsers
- [ ] Chrome Mobile (Android 8+)
- [ ] Safari Mobile (iOS 12+)
- [ ] Samsung Internet (Android)
- [ ] Firefox Mobile (Android)

### Feature Testing
- [ ] JavaScript disabled (basic functionality)
- [ ] Slow 3G connection
- [ ] Screen readers (NVDA, JAWS)
- [ ] Keyboard navigation only
- [ ] High contrast mode
- [ ] Zoom up to 200%
```

### Performance Testing
```javascript
// Performance monitoring
class PerformanceMonitor {
  constructor() {
    this.metrics = {};
    this.init();
  }

  init() {
    if ('web-vitals' in window) {
      this.measureCoreWebVitals();
    } else {
      this.measureBasicMetrics();
    }
  }

  measureCoreWebVitals() {
    // Largest Contentful Paint
    new PerformanceObserver((entryList) => {
      const entries = entryList.getEntries();
      const lastEntry = entries[entries.length - 1];
      this.metrics.lcp = lastEntry.startTime;
      console.log('LCP:', lastEntry.startTime);
    }).observe({type: 'largest-contentful-paint', buffered: true});

    // First Input Delay
    new PerformanceObserver((entryList) => {
      for (const entry of entryList.getEntries()) {
        this.metrics.fid = entry.processingStart - entry.startTime;
        console.log('FID:', this.metrics.fid);
      }
    }).observe({type: 'first-input', buffered: true});

    // Cumulative Layout Shift
    let clsValue = 0;
    new PerformanceObserver((entryList) => {
      for (const entry of entryList.getEntries()) {
        if (!entry.hadRecentInput) {
          clsValue += entry.value;
        }
      }
      this.metrics.cls = clsValue;
      console.log('CLS:', clsValue);
    }).observe({type: 'layout-shift', buffered: true});
  }

  measureBasicMetrics() {
    window.addEventListener('load', () => {
      const navigation = performance.getEntriesByType('navigation')[0];
      this.metrics.domContentLoaded = navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart;
      this.metrics.loadComplete = navigation.loadEventEnd - navigation.loadEventStart;

      console.log('Performance metrics:', this.metrics);
    });
  }

  sendMetrics() {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    if (window.gtag) {
      gtag('event', 'web_vitals', {
        'event_category': 'performance',
        'lcp': this.metrics.lcp,
        'fid': this.metrics.fid,
        'cls': this.metrics.cls
      });
    }
  }
}

new PerformanceMonitor();
```

---

## üöÄ Deployment –∏ CI/CD

### Deployment Checklist
```bash
# –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

# 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
‚ñ° –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS/JS —Ñ–∞–π–ª–æ–≤
‚ñ° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP –∫–æ–Ω–≤–µ—Ä—Å–∏—è)
‚ñ° Gzip compression –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚ñ° Browser caching headers

# 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚ñ° HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
‚ñ° Security headers (CSP, HSTS, X-Frame-Options)
‚ñ° PHP —Å–∫—Ä–∏–ø—Ç –∑–∞—â–∏—â–µ–Ω –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π
‚ñ° –§–æ—Ä–º–∞ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç CSRF

# 3. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚ñ° robots.txt –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚ñ° sitemap.xml —Å–æ–∑–¥–∞–Ω
‚ñ° Schema.org —Ä–∞–∑–º–µ—Ç–∫–∞ –≤–∞–ª–∏–¥–Ω–∞
‚ñ° Open Graph —Ç–µ–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
‚ñ° Meta —Ç–µ–≥–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

# 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚ñ° PageSpeed Insights > 85
‚ñ° GTmetrix Grade A
‚ñ° Core Web Vitals –≤ –∑–µ–ª–µ–Ω–æ–π –∑–æ–Ω–µ
‚ñ° Mobile Friendly Test –ø—Ä–æ–π–¥–µ–Ω

# 5. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚ñ° –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚ñ° –ü–∏—Å—å–º–∞ –¥–æ—Ö–æ–¥—è—Ç –Ω–∞ –ø–æ—á—Ç—É
‚ñ° SmartCaptcha —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
‚ñ° –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
‚ñ° –ö—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

# 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚ñ° –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ —Ü–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
‚ñ° Google Analytics —Å–æ–±—ã—Ç–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
‚ñ° Uptime monitoring –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚ñ° Error logging –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```

### Production Build Process
```bash
#!/bin/bash
# build.sh - —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É –ª–µ–Ω–¥–∏–Ω–≥–∞ –†–µ—Ç—Ä–æ–∑–Ω–∞–∫..."

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∏
mkdir -p dist/

# –ö–æ–ø–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
cp index.html dist/
cp -r php/ dist/
cp -r docs/ dist/

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º CSS
echo "üì¶ –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS..."
mkdir -p dist/assets/css/
npx clean-css-cli assets/css/main.css -o dist/assets/css/main.min.css
npx clean-css-cli assets/css/components.css -o dist/assets/css/components.min.css

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º JavaScript
echo "üì¶ –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è JavaScript..."
mkdir -p dist/assets/js/
npx terser assets/js/app.js -c -m -o dist/assets/js/app.min.js
npx terser assets/js/modules/*.js -c -m -o dist/assets/js/modules/

# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
echo "üñº –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π..."
mkdir -p dist/assets/images/
npx imagemin assets/images/**/*.{jpg,png} --out-dir=dist/assets/images/ --plugin=imagemin-webp

# –û–±–Ω–æ–≤–ª—è–µ–º –ø—É—Ç–∏ –≤ HTML
sed -i 's/assets\/css\/main.css/assets\/css\/main.min.css/g' dist/index.html
sed -i 's/assets\/js\/app.js/assets\/js\/app.min.js/g' dist/index.html

# –°–æ–∑–¥–∞–µ–º .htaccess –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
cat > dist/.htaccess << 'EOF'
# Gzip compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Browser caching
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
</IfModule>

# Security headers
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection "1; mode=block"
EOF

echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –§–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ –ø–∞–ø–∫–µ dist/"
```

---

## üìã –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
1. **Zero Build Complexity** ‚Äî –Ω–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö build –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
2. **Maximum Performance** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã + –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
3. **SEO Ready** ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ + Schema.org
4. **Accessibility First** ‚Äî WCAG 2.1 AA compliance
5. **Mobile Optimized** ‚Äî Mobile-First responsive design
6. **Analytics Ready** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–æ–π –∏ Google Analytics

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏
- ‚úÖ **PageSpeed >85** —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS
- ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Å–∏—è 8-12%** —á–µ—Ä–µ–∑ UX –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ —á–µ—Ç–∫–∏–µ CTA
- ‚úÖ **Core Web Vitals** –≤ –∑–µ–ª–µ–Ω–æ–π –∑–æ–Ω–µ —á–µ—Ä–µ–∑ performance-first –ø–æ–¥—Ö–æ–¥
- ‚úÖ **Cross-browser compatibility** —á–µ—Ä–µ–∑ progressive enhancement

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å:
- –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ —Ä–µ—Ç—Ä–æ–∑–Ω–∞–∫–æ–≤ –≤ —Ç–æ–≤–∞—Ä–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç—ã
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å CRM —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–æ –ø–ª–∞–Ω—É –∏–∑ `5-implementation-plan.md`

---

## üìã Change Log

### v1.2 - 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025
- **üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–õ–û–ö–ï–† –£–°–¢–†–ê–ù–ï–ù:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Rollback & Recovery Procedures
- **üö© –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** Feature Flags —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **üíæ –°–æ–∑–¥–∞–Ω–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Node.js —Å–∫—Ä–∏–ø—Ç–∞–º–∏
- **‚ö° –ì–æ—Ç–æ–≤–æ:** Emergency Response Plan —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π –∏ –±—ã—Å—Ç—Ä—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
- **üìä –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ:** Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å email –∞–ª–µ—Ä—Ç–∞–º–∏
- **üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞ (stable/beta/emergency)
- **‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π < 5 –º–∏–Ω—É—Ç

### v1.1 - 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025
- **üîê –ö–†–ò–¢–ò–ß–ù–û:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è –ø–æ SmartCaptcha –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω –±–ª–æ–∫–µ—Ä:** –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π SmartCaptcha –æ–ø–∏—Å–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- **üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ:** –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **üîÑ –î–æ–±–∞–≤–ª–µ–Ω–æ:** Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ SmartCaptcha
- **üìä –î–æ–±–∞–≤–ª–µ–Ω–æ:** –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### v1.0 - 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025
- **üèóÔ∏è –°–æ–∑–¥–∞–Ω–∞:** –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Frontend —Å Vanilla –ø–æ–¥—Ö–æ–¥–æ–º
- **üì± –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** Mobile-First responsive –¥–∏–∑–∞–π–Ω
- **‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ Core Web Vitals
- **üé® –ì–æ—Ç–æ–≤–æ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CSS –∏ JavaScript –º–æ–¥—É–ª–∏

---

*Frontend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ Winston –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ ¬´–†–µ—Ç—Ä–æ–∑–Ω–∞–∫¬ª –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ PMD –∏ BMad –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–µ–π.*